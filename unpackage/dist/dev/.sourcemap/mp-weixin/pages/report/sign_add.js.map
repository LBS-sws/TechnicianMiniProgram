{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/phpstudy_pro/WWW/10006/Technician/pages/report/sign_add.vue?0dc9","webpack:///D:/phpstudy_pro/WWW/10006/Technician/pages/report/sign_add.vue?8605","webpack:///D:/phpstudy_pro/WWW/10006/Technician/pages/report/sign_add.vue?a3ea","uni-app:///pages/report/sign_add.vue","webpack:///D:/phpstudy_pro/WWW/10006/Technician/pages/report/sign_add.vue?8189","webpack:///D:/phpstudy_pro/WWW/10006/Technician/pages/report/sign_add.vue?a97a"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","canvasName","ctx","startX","startY","canvasWidth","canvasHeight","selectColor","lineColor","lineSize","content","isTouch","jobid","jobtype","autograph_employee01_signature","autograph_employee02_signature","autograph_employee03_signature","noClick","onLoad","uni","exec","title","icon","setTimeout","methods","getStaffAutograph","mask","job_id","job_type","console","url","header","method","success","fail","uploadScaleStart","goBack","prevPage","delta","uploadScaleMove","retDraw","selectColorEvent","subCanvas","canvasId","fileType","quality","staffid","employee01_signature","employee02_signature","employee03_signature","customer_signature","customer_signature_add","is_base64","pngToBase64","filePath","encoding","resolve","responseType","base64","saveCanvasAsImg","duration","previewCanvasImg","urls","setCanvasBg"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,iBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACa;;;AAGpE;AACoM;AACpM,gBAAgB,yMAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA6vB,CAAgB,8vBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC2BjxB;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IAAA;IACA;IACA;MACAC;QACA;QACA;QACA;QACA;MACA,GACAC;IACA;;IAEA;IACA;IACA;MACAD;QACAE;QACAC;MACA;MACAC;QACA;MACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACAC;MAAA;MACAN;QACAE;QACAC;QACAI;MACA;MACA;QACAC;QACAC;MACA;MACAC;MAEAV;QACAW;QACAC;UACA;UACA;QACA;QACAC;QACAhC;QACAiC;UACAd;UACA;YACA;YACA;YACA;YACA;UACA;YACAA;cACAE;cACAC;YACA;UACA;QAGA;QACAY;UACAf;UACAU;UACAV;YACAE;YACAC;UACA;QACA;MACA;IACA;IAEA;IACAa;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;MAKAC;MACAR;MACAA;MAEAV;QAAA;QACAmB;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;MACA;MACA;MACA;IACA;IACA;AACA;AACA;AACA;AACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACAvB;UACAwB;UACAC;UACAC;UAAA;UACAZ;YACAd;cACAE;YACA;YACAQ;YACA;YACA7B;cACA;cACA;cACA;cACA;;cAEA;gBACA8C;gBACAnB;gBACAC;gBACAmB;gBACAC;gBACAC;gBACAC;cACA;cACA/B;gBACAW;gBACAC;kBACA;kBACA;gBACA;gBACAC;gBACAhC;gBACAiC;kBACAd;kBACA;oBACAA;sBACAE;sBACAC;oBACA;kBAEA;oBACAH;sBACAE;sBACAC;oBACA;kBACA;gBAEA;gBACAY;kBACAL;gBACA;cACA;cAGAQ;gBACAc;gBACAC;cACA;cACAjC;gBAAA;gBACAmB;cACA;YAEA;UACA;QACA;MACA;QACAnB;UACAE;UACAC;QACA;MACA;;MAEA;IACA;IACA+B;MACAxB;MACA;QACA;UACAV;YACAmC;YAAA;YACAC;YAAA;YACAtB;cACAuB,QACA,iEACA;YACA;YACAtB;cAAA;YAAA;UACA;QACA;UACAf;YACAW;YACAE;YACAyB;YACAxB;cACA;cACAyB;cACAF;YACA;YACAtB;cAAA;YAAA;UACA;QACA;MACA;IACA;IACA;IACAyB;MACAxC;QACAwB;QACAC;QACAC;QAAA;QACAZ;UACAJ;UACAV;YACAmC;YACArB;cACAd;gBACAE;gBACAuC;cACA;YACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA1C;QACAwB;QACAC;QACAC;QAAA;QACAZ;UACAd;YACA2C;UACA;QACA;MACA;IACA;IACA;IACA;IACAC;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA,EACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACtVA;AAAA;AAAA;AAAA;AAA6kC,CAAgB,2iCAAG,EAAC,C;;;;;;;;;;;ACAjmC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/report/sign_add.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/report/sign_add.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./sign_add.vue?vue&type=template&id=20725d9e&\"\nvar renderjs\nimport script from \"./sign_add.vue?vue&type=script&lang=js&\"\nexport * from \"./sign_add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./sign_add.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/report/sign_add.vue\"\nexport default component.exports","export * from \"-!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./sign_add.vue?vue&type=template&id=20725d9e&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./sign_add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./sign_add.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<view class=\"wrapper\">\n\t\t\t<view class=\"handBtn\">\n\t\t\t\t<image @click=\"selectColorEvent('black','#1A1A1A')\"\n\t\t\t\t\t:src=\"selectColor === 'black' ? '/static/other/color_black_selected.png' : '/static/other/color_black.png'\"\n\t\t\t\t\t:class=\"[selectColor === 'black' ? 'color_select' : '', 'black-select']\"></image>\n\t\t\t\t<image @click=\"selectColorEvent('red','#ca262a')\"\n\t\t\t\t\t:src=\"selectColor === 'red' ? '/static/other/color_red_selected.png' : '/static/other/color_red.png'\"\n\t\t\t\t\t:class=\"[selectColor === 'red' ? 'color_select' : '', 'black-select']\"></image>\n\t\t\t\t<button @click=\"retDraw\" class=\"delBtn\">重写</button>\n\t\t\t\t<!-- <button @click=\"saveCanvasAsImg\" class=\"saveBtn\">保存</button> --><!--class_name previewBtn/saveBtn-->\n\t\t\t\t<button @click=\"previewCanvasImg\" class=\"saveBtn\">预览</button>\n\t\t\t\t<button @click=\"$noMultipleClicks(subCanvas)\" class=\"subBtn\">完成</button>\n\t\t\t</view>\n\t\t\t<view class=\"handCenter\">\n\t\t\t\t<canvas class=\"handWriting\" :disable-scroll=\"true\" @touchstart=\"uploadScaleStart\"\n\t\t\t\t\t@touchmove=\"uploadScaleMove\" canvas-id=\"handWriting\"></canvas>\n\t\t\t</view>\n\t\t\t<view class=\"handRight\">\n\t\t\t\t<view class=\"handTitle\">请签名</view>\n\t\t\t</view>\n\t\t</view>\n\t</view> \n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcanvasName: 'handWriting',\n\t\t\t\tctx: '',\n\t\t\t\tstartX: null,\n\t\t\t\tstartY: null,\n\t\t\t\tcanvasWidth: 0,\n\t\t\t\tcanvasHeight: 0,\n\t\t\t\tselectColor: 'black',\n\t\t\t\tlineColor: '#1A1A1A', // 颜色\n\t\t\t\tlineSize: 5, // 笔记倍数\n\t\t\t\tcontent:'',\n\t\t\t\tisTouch:false,\n\t\t\t\tjobid:'',\n\t\t\t\tjobtype:'',\n\t\t\t\tautograph_employee01_signature:null,\n\t\t\t\tautograph_employee02_signature:null,\n\t\t\t\tautograph_employee03_signature:null,\n\t\t\t\tnoClick:true\n\t\t\t};\n\t\t},\n\t\tonLoad(index) {\n\t\t\tthis.ctx = uni.createCanvasContext(\"handWriting\");\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tuni.createSelectorQuery().select('.handCenter').boundingClientRect(rect => {\n\t\t\t\t\t\tthis.canvasWidth = rect.width;\n\t\t\t\t\t\tthis.canvasHeight = rect.height+10;\n\t\t\t\t\t\t/* 将canvas背景设置为 白底，不设置  导出的canvas的背景为透明 */\n\t\t\t\t\t\tthis.setCanvasBg('#fff');\n\t\t\t\t\t})\n\t\t\t\t\t.exec();\n\t\t\t});\n\t\t\t\n\t\t\t//登录检查\n\t\t\tvar loginRes = this.checkLogin();\n\t\t\tif (!loginRes) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请先登录\",\n\t\t\t\t\ticon: 'none',\n\t\t\t\t});\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\treturn false\n\t\t\t\t}, 2000);\n\t\t\t}\n\t\t\tthis.jobid = index.jobid\n\t\t\tthis.jobtype = index.jobtype\n\t\t\tthis.getStaffAutograph()\n\t\t},\n\t\tmethods: {\n\t\t\tgetStaffAutograph() {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: \"数据加载中...\",\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tmask: true\n\t\t\t\t})\n\t\t\t\tlet params = {\n\t\t\t\t\tjob_id: this.jobid,\n\t\t\t\t\tjob_type: this.jobtype                                                                                                                                                                                                                                                              \n\t\t\t\t}\n\t\t\t\tconsole.log(params)\n\t\t\t\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `${this.$baseUrl}/Saveautographadd/getStaffAutograph`,\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t\t'token': uni.getStorageSync('token')\n\t\t\t\t\t},\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: params,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\tif(res.data.code == 0){\n\t\t\t\t\t\t\tlet result = res.data.data\n\t\t\t\t\t\t\tthis.autograph_employee01_signature = result.autograph.employee01_signature?result.autograph.employee01_signature:null\n\t\t\t\t\t\t\tthis.autograph_employee02_signature = result.autograph.employee02_signature?result.autograph.employee02_signature:null\n\t\t\t\t\t\t\tthis.autograph_employee03_signature = result.autograph.employee03_signature?result.autograph.employee03_signature:null\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: res.data.msg,\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\tconsole.log('error' + res);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.data.msg,\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 笔迹开始\n\t\t\tuploadScaleStart(e) {\n\t\t\t\tthis.startX = e.changedTouches[0].x\n\t\t\t\tthis.startY = e.changedTouches[0].y\n\t\t\t\t//设置画笔参数\n\t\t\t\t//画笔颜色\n\t\t\t\tthis.ctx.setStrokeStyle(this.lineColor)\n\t\t\t\t//设置线条粗细\n\t\t\t\tthis.ctx.setLineWidth(this.lineSize)\n\t\t\t\t//设置线条的结束端点样式\n\t\t\t\tthis.ctx.setLineCap(\"round\") //'butt'、'round'、'square'\n\t\t\t\t//开始画笔\n\t\t\t\tthis.ctx.beginPath()\n\t\t\t},\n\t\t\tgoBack() {\n\t\t\t\tvar pages = getCurrentPages();\n\t\t\t\tvar prevPage = pages[pages.length - 1]??'';\n\t\t\t\t// #ifdef H5\n\t\t\t\tprevPage.$vm.testdata = this.content;\n\t\t\t\t// #endif\n\t\t\t\t// #ifdef MP-WEIXIN\n\t\t\t\t prevPage.setData(this.content);\n\t\t\t\t console.log(\"this.content\")\n\t\t\t\t console.log(this.content)\n\t\t\t\t// #endif\n\t\t\t\tuni.navigateBack({//返回\n\t\t\t\t\tdelta: 1\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 笔迹移动\n\t\t\tuploadScaleMove(e) {\n\t\t\t\t//取点\n\t\t\t\tlet temX = e.changedTouches[0].x\n\t\t\t\tlet temY = e.changedTouches[0].y\n\t\t\t\t//画线条\n\t\t\t\tthis.ctx.moveTo(this.startX, this.startY)\n\t\t\t\tthis.ctx.lineTo(temX, temY)\n\t\t\t\tthis.ctx.stroke()\n\t\t\t\tthis.startX = temX\n\t\t\t\tthis.startY = temY\n\t\t\t\tthis.ctx.draw(true)\n\t\t\t\tthis.isTouch = true\n\t\t\t},\n\t\t\t/**\n\t\t\t * 重写\n\t\t\t */\n\t\t\tretDraw() {\n\t\t\t\tthis.ctx.clearRect(0, 0, 700, 730);\n\t\t\t\tthis.ctx.draw();\n\t\t\t\t//设置canvas背景\n\t\t\t\tthis.setCanvasBg('#fff');\n\t\t\t},\n\t\t\t/**\n\t\t\t * @param {Object} str\n\t\t\t * @param {Object} color\n\t\t\t * 选择颜色\n\t\t\t */\n\t\t\tselectColorEvent(str, color) {\n\t\t\t\tthis.selectColor = str;\n\t\t\t\tthis.lineColor = color;\n\t\t\t},\n\t\t\t//完成\n\t\t\tsubCanvas() {\n\t\t\t\tvar that = this;\n\t\t\t\tif(that.isTouch){\n\t\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\t\tcanvasId: 'handWriting',\n\t\t\t\t\t\tfileType: 'png',\n\t\t\t\t\t\tquality: 1, //图片质量\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\ttitle: \"保存中...\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconsole.log(res.tempFilePath, 'canvas生成图片地址');\n\t\t\t\t\t\t\tlet data = that.pngToBase64(res.tempFilePath,'png');\n\t\t\t\t\t\t\tdata.then(result=> {\n\t\t\t\t\t\t\t\tvar pages = getCurrentPages();\n\t\t\t\t\t\t\t\tvar prevPage = pages[pages.length - 2]; //上一个页面\n\t\t\t\t\t\t\t\t //直接调用上一个页面的setData()方法，把数据存到上一个页面中去\n\t\t\t\t\t\t\t\t// 上一个页面最后设置userdata\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tlet param = {\n\t\t\t\t\t\t\t\t\tstaffid: uni.getStorageSync('staffid'),\n\t\t\t\t\t\t\t\t\tjob_id: that.jobid,\n\t\t\t\t\t\t\t\t\tjob_type: that.jobtype,\n\t\t\t\t\t\t\t\t\temployee01_signature:that.autograph_employee01_signature,\n\t\t\t\t\t\t\t\t\temployee02_signature:that.autograph_employee02_signature,\n\t\t\t\t\t\t\t\t\temployee03_signature:that.autograph_employee03_signature,\n\t\t\t\t\t\t\t\t\tcustomer_signature:result,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\t\turl: `${that.$baseUrl}/saveautographadd?is_grade=0`,\n\t\t\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t\t\t\t\t\t'token': uni.getStorageSync('token')\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\t\tdata: param,\n\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\tif (res.data.code == 1) {\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: res.data.msg,\n\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: res.data.msg,\n\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tprevPage.setData({\n\t\t\t\t\t\t\t\t     customer_signature_add: result,\n\t\t\t\t\t\t\t\t     is_base64: 1\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tuni.navigateBack({//返回\n\t\t\t\t\t\t\t\t   delta: 1\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: \"请签名\",\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// this.goBack();\n\t\t\t},\n\t\t\t pngToBase64(url, type) {\n\t\t\t\t console.log(url)\n\t\t\t    return new Promise((resolve, reject) => {\n\t\t\t        if (!!uni.getFileSystemManager()) {\n\t\t\t            uni.getFileSystemManager().readFile({\n\t\t\t                filePath: url, //选择图片返回的相对路径\n\t\t\t                encoding: \"base64\", //编码格式\n\t\t\t                success: (res) => {\n\t\t\t                    resolve(\n\t\t\t                        \"data:image/\" + type.toLocaleLowerCase() + \";base64,\" + res.data\n\t\t\t                    );\n\t\t\t                },\n\t\t\t                fail: (res) => reject(res.errMsg),\n\t\t\t            });\n\t\t\t        } else {\n\t\t\t            uni.request({\n\t\t\t                url: url,\n\t\t\t                method: \"GET\",\n\t\t\t                responseType: \"arraybuffer\",\n\t\t\t                success: (ress) => {\n\t\t\t                    let base64 = wx.arrayBufferToBase64(ress.data); //把arraybuffer转成base64\n\t\t\t                    base64 = \"data:image/jpeg;base64,\" + base64; //不加上这串字符，在页面无法显示的哦\n\t\t\t                    resolve(base64);\n\t\t\t                },\n\t\t\t                fail: (res) => reject(res.errMsg),\n\t\t\t            });\n\t\t\t        }\n\t\t\t    });\n\t\t\t},\n\t\t\t//保存到相册\n\t\t\tsaveCanvasAsImg() {\n\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\tcanvasId: 'handWriting',\n\t\t\t\t\tfileType: 'png',\n\t\t\t\t\tquality: 1, //图片质量\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log(res.tempFilePath, 'canvas生成图片地址');\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\n\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '已保存到相册',\n\t\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t//预览\n\t\t\tpreviewCanvasImg() {\n\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\tcanvasId: 'handWriting',\n\t\t\t\t\tfileType: 'jpg',\n\t\t\t\t\tquality: 1, //图片质量\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tuni.previewImage({\n\t\t\t\t\t\t\turls: [res.tempFilePath] //预览图片 数组\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t//设置canvas背景色  不设置  导出的canvas的背景为透明\n\t\t\t//@params：字符串  color\n\t\t\tsetCanvasBg(color) {\n\n\t\t\t\t/* 将canvas背景设置为 白底，不设置  导出的canvas的背景为透明 */\n\t\t\t\t//rect() 参数说明  矩形路径左上角的横坐标，左上角的纵坐标, 矩形路径的宽度, 矩形路径的高度\n\t\t\t\t//这里是 canvasHeight - 4 是因为下边盖住边框了，所以手动减了写\n\t\t\t\tthis.ctx.rect(0, 0, this.canvasWidth, this.canvasHeight - 4);\n\t\t\t\t// ctx.setFillStyle('red')\n\t\t\t\tthis.ctx.setFillStyle(color);\n\t\t\t\tthis.ctx.fill(); //设置填充\n\t\t\t\tthis.ctx.draw(); //开画\n\t\t\t},\n\t\t\t //旋转图片，生成新canvas实例\n\t\t}\n\t};\n</script>\n\n<style>\n\tpage {\n\t\tbackground: #fbfbfb;\n\t\theight: auto;\n\t\toverflow: hidden;\n\t}\n\n\t.wrapper {\n\t\twidth: 100%;\n\t\theight: 95vh;\n\t\tmargin: 30rpx 0;\n\t\toverflow: hidden;\n\t\tdisplay: flex;\n\t\talign-content: center;\n\t\tflex-direction: row;\n\t\tjustify-content: center;\n\t\tfont-size: 28rpx;\n\t}\n\n\t.handWriting {\n\t\tbackground: #fff;\n\t\twidth: 100%;\n\t\theight: 95vh;\n\t}\n\n\t.handRight {\n\t\tdisplay: inline-flex;\n\t\talign-items: center;\n\t}\n\n\t.handCenter {\n\t\tborder: 4rpx dashed #e9e9e9;\n\t\tflex: 5;\n\t\toverflow: hidden;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.handTitle {\n\t\ttransform: rotate(90deg);\n\t\tflex: 1;\n\t\tcolor: #666;\n\t}\n\n\t.handBtn button {\n\t\tfont-size: 28rpx;\n\t}\n\n\t.handBtn {\n\t\theight: 95vh;\n\t\tdisplay: inline-flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\talign-content: space-between;\n\t\tflex: 1;\n\t}\n\n\t.delBtn {\n\t\tposition: absolute;\n\t\ttop: 250rpx;\n\t\tleft: 0rpx;\n\t\ttransform: rotate(90deg);\n\t\tcolor: #666;\n\t}\n\n\t.delBtn image {\n\t\tposition: absolute;\n\t\ttop: 13rpx;\n\t\tleft: 25rpx;\n\t}\n\n\t.subBtn {\n\t\tposition: absolute;\n\t\tbottom: 52rpx;\n\t\tleft: -3rpx;\n\t\tdisplay: inline-flex;\n\t\ttransform: rotate(90deg);\n\t\tbackground: #008ef6;\n\t\tcolor: #fff;\n\t\tmargin-bottom: 30rpx;\n\t\ttext-align: center;\n\t\tjustify-content: center;\n\t}\n\n\t/*Peach - 新增 - 保存*/\n\n\t.saveBtn {\n\t\tposition: absolute;\n\t\ttop: 375rpx;\n\t\tleft: 0rpx;\n\t\ttransform: rotate(90deg);\n\t\tcolor: #666;\n\t}\n\n\t.previewBtn {\n\t\tposition: absolute;\n\t\ttop: 500rpx;\n\t\tleft: 0rpx;\n\t\ttransform: rotate(90deg);\n\t\tcolor: #666;\n\t}\n\n\t.uploadBtn {\n\t\tposition: absolute;\n\t\ttop: 625rpx;\n\t\tleft: 0rpx;\n\t\ttransform: rotate(90deg);\n\t\tcolor: #666;\n\t}\n\n\t/*Peach - 新增 - 保存*/\n\n\t.black-select {\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t\tposition: absolute;\n\t\ttop: 30rpx;\n\t\tleft: 25rpx;\n\t}\n\n\t.black-select.color_select {\n\t\twidth: 90rpx;\n\t\theight: 90rpx;\n\t\ttop: 100rpx;\n\t\tleft: 10rpx;\n\t}\n\n\t.red-select {\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t\tposition: absolute;\n\t\ttop: 140rpx;\n\t\tleft: 25rpx;\n\t}\n\n\t.red-select.color_select {\n\t\twidth: 90rpx;\n\t\theight: 90rpx;\n\t\ttop: 120rpx;\n\t\tleft: 10rpx;\n\t}\n</style>\n","import mod from \"-!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./sign_add.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./sign_add.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1702305436240\n      var cssReload = require(\"E:/软件/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}