{"version":3,"sources":["uni-app:///main.js","webpack:///D:/phpstudy_pro/WWW/10006/TechnicianMiniProgram/pages/service/scan_equipment.vue?10ac","webpack:///D:/phpstudy_pro/WWW/10006/TechnicianMiniProgram/pages/service/scan_equipment.vue?f641","webpack:///D:/phpstudy_pro/WWW/10006/TechnicianMiniProgram/pages/service/scan_equipment.vue?1bd6","webpack:///D:/phpstudy_pro/WWW/10006/TechnicianMiniProgram/pages/service/scan_equipment.vue?0aa0","uni-app:///pages/service/scan_equipment.vue","webpack:///D:/phpstudy_pro/WWW/10006/TechnicianMiniProgram/pages/service/scan_equipment.vue?1964","webpack:///D:/phpstudy_pro/WWW/10006/TechnicianMiniProgram/pages/service/scan_equipment.vue?f8cd"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","arr","components","ldSelect","data","name","use_areas","shortcuts","shortcutsOld","jobid","jobtype","shortcut_type","service_type","scan_code","id","areaclick","typeid","showmore","equipment_name","equipment_area","equipment_number","all_equipment_number","number","site_photos","check_datas","check_handle","check_handles","more_info","end_site_photos","start_site_photos","upload_site_photos","search_key","timer","len","ct","disabled","one_eq","eq_mark","eq_mark_num","list","selectList","onLoad","uni","title","icon","setTimeout","methods","inputFun","clearTimer","clearTimeout","showAllEq","content","selectChange","areaChange","data_select","url","header","method","success","console","equipmentNumber","use_area","item","itemx","arr_arr","label","value","selectArr","check_targt_arr","check_targt_array","select","check_datas_arr","check_datas_array","check_handles_arr","shortcutsArr","fail","scanCode","param","staffid","city","job_id","job_type","editParkImg","deleteImg","replace","del","getimgList","save","eq_number","savex","imgs","filePath","showCancel"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,uBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2H;AAC3H;AACkE;AACL;AACa;;;AAG1E;AACoM;AACpM,gBAAgB,yMAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,yFAAM;AACR,EAAE,kGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,6FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,mQAEN;AACP,KAAK;AACL;AACA,aAAa,yQAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,yTAEN;AACP,KAAK;AACL;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACzEA;AAAA;AAAA;AAAA;AAAmwB,CAAgB,owBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgHvxB;EAAA;EACA;EACA;EACA;IACA;MACAC;IACA;EACA;EACA;AACA;AAAA;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA,eAEA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;EACAC;IACA;IACA;MACAC;QACAC;QACAC;MACA;MACAC;QACA;MACA;IACA;IACA;IACA;IAEA;IACA;IACA;EAEA;EACAC;IAEAC;MAAA;MACA;MACA;MACA;QAEA;UACA;UACA;QACA;MAEA;QACA;QACA;MACA;IACA;IACAC;MACA;QACAC;MACA;IACA;IACAC;MACAR;QACAC;QACAQ;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MAAA;MACA;MACAZ;QACAa;QACAC;UACA;UACA;QACA;QACAC;QACArD;QACAsD;UACAC;UACA;YACA;cACA;cACA;;cAEA;cACA;cACA;cACA,oCACA;gBACA;gBACA;gBACA;cACA;cACA;;cAEA;gBACA;kBACA;oBACAC;kBACA;oBACAA;kBACA;gBACA;gBACA;gBACA;gBACA;cACA;cACA;;cAGA;cACA;cACAC;gBACAC;gBACAA;cACA;cACA;cAEA;gBAAA;gBACA;cACA;cACA;cACA;gBACA;gBACA;cACA;;cAEA;cACA;cACA;cACA;cACA,+CACA;gBACA;gBACA;;gBAEAtB;kBAEA;kBACAuB;oBACAC;sBAAAC;sBAAAC;oBAAA;kBACA;kBACAC;gBACA;gBACA;gBACA;cACA;cACA;cACA;gBACA;gBACA,+CACA;kBACA;kBACA;kBACA;kBACAC;oBACA;sBACAC;wBAAAJ;wBAAAC;sBAAA;oBACA;sBACAG;wBAAAJ;wBAAAC;wBAAAI;sBAAA;oBACA;kBAEA;kBACA;gBACA;kBACA;gBACA;cAEA;cAEA;gBACA;gBACA;gBACA;gBACAC;kBAEA;kBACA;oBACA;oBACAC;sBAAAP;sBAAAC;oBAAA;kBACA;oBACA;oBACAM;sBAAAP;sBAAAC;sBAAAI;oBAAA;kBACA;gBAEA;gBACA;cACA;;cAGA;cACA;cACA;cACA5C;gBACA+C;kBAAAR;kBAAAC;gBAAA;cACA;cACA;cAEA;gBACA;cACA;;cAGA;cACA;gBACA;gBACA,+CACA;kBACA;gBACA;kBACA;gBACA;cACA;cAEA;;cAEA,mCACA;gBACA;gBACA;cACA;;cAEA;cACA;cACA;cACA3D;gBACAmE;kBAAAT;kBAAAC;gBAAA;cACA;cACA;cACA;YACA;UACA;QAEA;QACAS;UACAhB;QACA;MACA;IACA;IACAiB;MAAA;MACAlC;QACAgB;UAAA;YAAA;YAAA;cAAA;gBAAA;kBAAA;oBACA;sBACAmB;wBACAC;wBACAC;wBACAlE;wBACAmE;wBACAC;sBACA;sBACAvC;wBACAa;wBACAC;0BACA;0BACA;wBACA;wBACAC;wBACArD;wBACAsD;0BACA;4BACA;4BACA;0BACA;4BACAhB;8BACAE;8BACAD;4BACA;0BACA;wBAEA;wBACAgC;0BACAhB;wBACA;sBACA;oBACA;sBACAjB;wBACAE;wBACAD;sBACA;oBACA;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA,CAEA;UAAA;YAAA;UAAA;UAAA;QAAA;MACA;IACA;IACAuC;IACAC;MACA;MACA;MACA;QACA,wCACAC;QACAC;QACA,uCACA;MACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MAAA;MAEA;QACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;;MAEA;;MAEA;MAEA;QACA;QACA7C;QACA;MACA;MACA;MACA;MACA,yBACA;QACAjB;MACA;MACA;MACA;MACA;QAEA;QACAuD;QACAC;QACA/D;QACAC;QACAK;QACAC;QACA;QACAE;QACA6D;MACA;MACA;MACA9C;QACAa;QACAC;UACA;UACA;QACA;QACAC;QACArD;QACAsD;UACAhB;UACAA;YACAC;YACAC;UACA;UACA,0BACA;YACAC;cACAH;gBACAa,yCACA,OACA9C,6BACAC,UACA,oBACA,uBACA,0BACAE,+BACAsB;cACA;YACA;UACA;UACA,0BACA;YACAQ;cACAC;cACAC;YACA;YACA;UACA;QACA;QACA+B;UACAhB;QACA;MACA;IACA;IACA8B;MAAA;MACA;MACA;QACA/C;UACAC;UACAC;QACA;QACA;MACA;QACAF;UACAC;UACAC;QACA;QACA;MACA;QACAF;UACAC;QACA;QACA;QACA;UACA;UACA;YACA;cACA;gBAAA;gBACA+C;cACA;YACA;UACA;QACA;QACA;QACA;UACA;QACA;QACA;UACAhD;YACAa;YAAA;YACAoC;YAAA;YACAtF;YAAA;YACAmD;cACA;cACA;YACA;YACAE;cACA;cACA;gBACA;gBACA;kBACA;gBACA;kBACA;gBACA;cACA;gBACAhB;kBACAC;kBACAC;gBACA;cACA;YAGA;YACA+B;cACAhB;cACAjB;gBACAS;gBACAyC;cACA;YACA;UACA;QAEA;QACA/C;UACA;UACA;YACAiC;YACAhE;YACAkE;YACAC;YACA/D;YACAC;YACAK;YACAC;YACAF;YACAI;YACAW;UACA;UACAI;UACAA;YACAa;YACAC;cACA;cACA;YACA;YACAC;YACArD;YACAsD;cACAhB;cACAA;gBACAC;gBACAC;cACA;cACAC;gBACAH;kBACAa,yCACA,OACA9C,6BACAC,UACA,oBACA,uBACA,0BACAE,+BACAsB;gBACA;cACA;YACA;YACAyC;cACAhB;YACA;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACxpBA;AAAA;AAAA;AAAA;AAAmlC,CAAgB,ijCAAG,EAAC,C;;;;;;;;;;;ACAvmC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/service/scan_equipment.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/service/scan_equipment.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./scan_equipment.vue?vue&type=template&id=1fb094c2&\"\nvar renderjs\nimport script from \"./scan_equipment.vue?vue&type=script&lang=js&\"\nexport * from \"./scan_equipment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./scan_equipment.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/service/scan_equipment.vue\"\nexport default component.exports","export * from \"-!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./scan_equipment.vue?vue&type=template&id=1fb094c2&\"","var components\ntry {\n  components = {\n    clRow: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-row/cl-row\" */ \"@/cl-uni/components/cl-row/cl-row.vue\"\n      )\n    },\n    clCol: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-col/cl-col\" */ \"@/cl-uni/components/cl-col/cl-col.vue\"\n      )\n    },\n    clInput: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-input/cl-input\" */ \"@/cl-uni/components/cl-input/cl-input.vue\"\n      )\n    },\n    clSelect: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-select/cl-select\" */ \"@/cl-uni/components/cl-select/cl-select.vue\"\n      )\n    },\n    clInputNumber: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-input-number/cl-input-number\" */ \"@/cl-uni/components/cl-input-number/cl-input-number.vue\"\n      )\n    },\n    clCheckboxGroup: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-checkbox-group/cl-checkbox-group\" */ \"@/cl-uni/components/cl-checkbox-group/cl-checkbox-group.vue\"\n      )\n    },\n    clCheckbox: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-checkbox/cl-checkbox\" */ \"@/cl-uni/components/cl-checkbox/cl-checkbox.vue\"\n      )\n    },\n    ldSelect: function () {\n      return import(\n        /* webpackChunkName: \"components/ld-select/ld-select\" */ \"@/components/ld-select/ld-select.vue\"\n      )\n    },\n    clTextarea: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-textarea/cl-textarea\" */ \"@/cl-uni/components/cl-textarea/cl-textarea.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./scan_equipment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./scan_equipment.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\" style=\"margin-bottom: 40px;\">\r\n\t\t<view class=\"service\">\r\n\t\t\t<view class=\"service_content\">\r\n\t\t\t\t<!-- <cl-row>\r\n\t\t\t\t\t<view class=\"text-left\">设备二维码</view>\r\n\t\t\t\t\t<view class=\"text-right\">\r\n\t\t\t\t\t\t<cl-icon name=\"cl-icon-scan\" color=\"#007AFF\" :size=\"60\" class=\"scan\" @tap=\"scanCode()\"></cl-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</cl-row> -->\r\n\t\t\t\t<cl-row>\r\n\t\t\t\t\t<view class=\"text-left\" >设备编号</view>\r\n\t\t\t\t\t<view class=\"text-right\" style=\"width: 70%;\">\r\n\t\t\t\t\t\t<view v-if=\"one_eq == 1\">\r\n\t\t\t\t\t\t\t<cl-col span=\"12\" style=\"text-align: right;\">\r\n\t\t\t\t\t\t\t\t{{eq_mark}}\r\n\t\t\t\t\t\t\t</cl-col>\r\n\t\t\t\t\t\t\t<cl-col span=\"12\">\r\n\t\t\t\t\t\t\t\t<cl-input  v-model=\"eq_mark_num\" placeholder=\"自定义\"  />\r\n\t\t\t\t\t\t\t</cl-col>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"one_eq == 0\">\r\n\t\t\t\t\t\t\t{{equipment_number}}\r\n\t\t\t\t\t\t\t<span v-if=\"showmore\" @click=\"showAllEq\" class=\"more\">\r\n\t\t\t\t\t\t\t\t更多\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</cl-row>\r\n\t\t\t\t<cl-row>\r\n\t\t\t\t\t<view class=\"text-left\">设备名称</view>\r\n\t\t\t\t\t<view class=\"text-right\">{{equipment_name}}</view>\r\n\t\t\t\t</cl-row>\r\n\t\t\t\t<!-- v-if=\"list.length == 0 || list.length==1\" -->\r\n\t\t\t\t<cl-row >\r\n\t\t\t\t\t<view class=\"text-left\" style=\"margin-top: 15px;\">设备区域</view>\r\n\t\t\t\t\t<view class=\"text-right\" style=\"width: 70%;\" v-if=\"areaclick\">\r\n\t\t\t\t\t\t<cl-col span=\"12\">\r\n\t\t\t\t\t\t<cl-input  :disabled=\"disabled\"   v-model=\"equipment_area\" placeholder=\"自定义\"   />\r\n\t\t\t\t\t\t</cl-col>\r\n\t\t\t\t\t\t<cl-col span=\"12\">\r\n\t\t\t\t\t\t<cl-select  :disabled=\"disabled\" v-model=\"equipment_area\" :options=\"use_areas\"></cl-select>\r\n\t\t\t\t\t\t</cl-col>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text-right\" style=\"width: 70%;\" v-else>\r\n\t\t\t\t\t\t<cl-col span=\"12\">\r\n\t\t\t\t\t\t<cl-input  :disabled=\"!disabled\"  v-model=\"equipment_area\" placeholder=\"自定义\"   />\r\n\t\t\t\t\t\t</cl-col>\r\n\t\t\t\t\t\t<cl-col span=\"12\">\r\n\t\t\t\t\t\t<cl-select  :disabled=\"!disabled\"  v-model=\"equipment_area\" :options=\"use_areas\"></cl-select>\r\n\t\t\t\t\t\t</cl-col>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</cl-row>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"service\">\r\n\t\t\t<view class=\"service_title\">检查数据</view>\r\n\t\t\t<!-- v-if=\"typeid==1\" -->\r\n\t\t\t<!-- 1数量输入 2数据输入 -->\r\n\t\t\t<template v-if=\"typeid==1\">\r\n\t\t\t\t<view class=\"new_card_content\">\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<view v-for=\"(check, index_cd) in check_datas\" :key=\"index_cd\">\r\n\t\t\t\t\t\t  <view class=\"num_c\">\r\n\t\t\t\t\t\t\t{{check.label}}\r\n\t\t\t\t\t\t\t<cl-input-number :input=true :max=1000000 v-model=\"check.value\" style=\"margin-left: 10px;\"></cl-input-number>\r\n\t\t\t\t\t\t  </view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t\t<template v-else>\r\n\t\t\t\t<view class=\"new_card_content\">\r\n\t\t\t\t\t<cl-row>\r\n\t\t\t\t\t\t<cl-col v-for=\"(check, index) in check_datas\" :key=\"index\">\r\n\t\t\t\t\t\t  <view class=\"num_c\">\r\n\t\t\t\t\t\t\t<view style=\"float: left;margin: 7px;\">{{check.label}}</view>\r\n\t\t\t\t\t\t\t<view style=\"float: right;\">\r\n\t\t\t\t\t\t\t  <cl-select v-model=\"check.value\" :options=\"check.select\"></cl-select>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t  </view>\r\n\t\t\t\t\t\t</cl-col>\r\n\t\t\t\t\t</cl-row>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t</view>\r\n\t\t<view class=\"service\">\r\n\t\t\t<view class=\"service_title\">检查与处理<span class=\"dcts\">(可多选)</span></view>\r\n\t\t\t<view class=\"service_content\">\r\n\t\t\t\t<cl-checkbox-group v-model=\"check_handle\" border>\r\n\t\t\t\t\t<cl-checkbox v-for=\"(checkup,index_c) in check_handles\" :key=\"index_c\" v-bind:label=\"checkup.value\">\r\n\t\t\t\t\t\t{{checkup.label}}\r\n\t\t\t\t\t</cl-checkbox>\r\n\t\t\t\t</cl-checkbox-group>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"service\">\r\n\t\t\t<view class=\"service_title\">补充说明</view>\r\n\t\t\t<view class=\"lz\">\r\n\t\t\t\t<ld-select :multiple=\"true\" :list=\"shortcuts\" @inputFun=\"inputFun\" label-key=\"label\" value-key=\"value\"\r\n\t\t\t\t\tplaceholder=\"示例\" clearable v-model=\"more_info\" @change=\"selectChange\"></ld-select>\r\n\t\t\t</view>\r\n\t\t\t<cl-textarea rows=\"13\" cols=\"40\" placeholder=\"请输入\" v-model=\"more_info\" count></cl-textarea>\r\n\t\t</view>\r\n\t\t<view class=\"bu\" @tap=\"save()\">\r\n\t\t\t保存\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport const fuzzyQuery = (list, keyWord, attribute = 'value') => {\n\tconst reg = new RegExp(keyWord)\n\tconst arr = []\n\tfor (let i = 0; i < list.length; i++) {\n\t\tif (reg.test(list[i][attribute])) {\n\t\t\tarr.push(list[i])\n\t\t}\n\t}\n\treturn arr\n}\r\nimport ldSelect from '@/components/ld-select/ld-select.vue';\r\nexport default {\r\n\tcomponents: {\r\n\t\t\tldSelect\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tname:'设备详情',\r\n\t\t\tuse_areas: [],\r\n\t\t\tshortcuts: [],\r\n\t\t\tshortcutsOld:[],\r\n\t\t\tjobid: '',\r\n\t\t\tjobtype: '',\r\n\t\t\tshortcut_type: '',\r\n\t\t\tservice_type: '',\r\n\t\t\tscan_code: '',\r\n\t\t\tid: '',\r\n\t\t\tareaclick:0,\r\n\t\t\ttypeid: 0,\r\n\t\t\tshowmore:0,\r\n\t\t\tequipment_name: '',\r\n\t\t\tequipment_area: '',\r\n\t\t\tequipment_number: '',\r\n\t\t\tall_equipment_number: '',\r\n\t\t\tnumber: '',\r\n\t\t\tsite_photos: '',\r\n\t\t\tcheck_datas: [],\r\n\t\t\tcheck_handle: [],//'',\r\n\t\t\tcheck_handles: '',\r\n\t\t\tmore_info: [],\r\n\t\t\tend_site_photos: '',\r\n\t\t\tstart_site_photos: '',\r\n\t\t\tupload_site_photos: '',\r\n\t\t\tsearch_key: '',\r\n\t\t\ttimer: null,\r\n\t\t\tlen: false,\r\n\t\t\tct:0,\r\n\t\t\tdisabled:true,\t// 单个设备true 多个设备false\t\r\n\t\t\tone_eq:1,\t\t// 1为单个设备，0为多个设备\r\n\t\t\teq_mark:'',\t\t// 设备标识\r\n\t\t\teq_mark_num:'', // 设备编号\r\n\t\t\tlist:[]\t\t\t,// 储存list\r\n\t\t\tselectList:[]\r\n\t\t}\r\n\t},\r\n\tonLoad(index) {\r\n\t\tvar loginRes = this.checkLogin();\r\n\t\tif (!loginRes) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: \"请先登录\",\r\n\t\t\t\ticon: 'none',\r\n\t\t\t});\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\treturn false\r\n\t\t\t}, 2000);\r\n\t\t}\r\n\t\tthis.jobid = index.jobid\r\n\t\tthis.jobtype = index.jobtype\r\n\t\t\r\n\t\tthis.id = index.id\r\n\t\t// this.ct = uni.getStorageSync('ct')\r\n\t\tthis.data_select()\r\n\t\t\r\n\t},\r\n\tmethods: {\r\n\t\t\t\r\n\t\t\tinputFun(data) {\r\n\t\t\t\tthis.search_key = data.value;\r\n\t\t\t\tthis.clearTimer()\r\n\t\t\t\tif (this.search_key && this.search_key.length > 0) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\t\t\tlet result = fuzzyQuery(this.shortcuts, this.search_key, 'value') // 数组、搜索值、字段\r\n\t\t\t\t\t\tthis.shortcuts = result\r\n\t\t\t\t\t}, 500)\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 恢复原来值\r\n\t\t\t\t\tthis.shortcuts = this.shortcutsOld\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tclearTimer() {\r\n\t\t\t\tif (this.timer) {\r\n\t\t\t\t\tclearTimeout(this.timer)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshowAllEq(){\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '全部设备编号',\r\n\t\t\t\t\tcontent: this.all_equipment_number,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tselectChange(val) {\r\n\t\t\t\tthis.more_info = val\r\n\t\t\t},\r\n\t\t\tareaChange(val) {\r\n\t\t\t\tthis.equipment_area = val\r\n\t\t\t},\r\n\t\t\t// 详情\r\n\t\t\tdata_select() {\r\n\t\t\t\tlet param = {}\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: `${this.$baseUrl}/Equipment.Equipment/getEqInfo?job_type=` + this.jobtype + \"&job_id=\" + this.jobid + \"&ids=\" + this.id,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\r\n\t\t\t\t\t\t'token': uni.getStorageSync('token')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tdata: param,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(res.data.data)\r\n\t\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\t\tif (res.data.data) {\r\n\t\t\t\t\t\t\t\t// 1.设备名称\r\n\t\t\t\t\t\t\t\tthis.equipment_name = res.data.data.eq_name\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// 2.设备编号\r\n\t\t\t\t\t\t\t\tvar equipmentNumber = '';\r\n\t\t\t\t\t\t\t\t// 单个\r\n\t\t\t\t\t\t\t\tif(res.data.data.list.length == 1)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.eq_mark = res.data.data.list[0]['equipment_number']\t// 设备标识\r\n\t\t\t\t\t\t\t\t\tthis.eq_mark_num = res.data.data.list[0]['number']\t\t\t// 设备编号\r\n\t\t\t\t\t\t\t\t\tthis.equipment_number = res.data.data.list[0]['number']\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// 多个\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(res.data.data.list.length>1){\r\n\t\t\t\t\t\t\t\t\tfor(let i=0;i<res.data.data.list.length;i++){\r\n\t\t\t\t\t\t\t\t\t\tif(equipmentNumber == ''){\r\n\t\t\t\t\t\t\t\t\t\t\tequipmentNumber = res.data.data.list[i]['equipment_number'] + res.data.data.list[i]['number']\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tequipmentNumber = equipmentNumber + ',' +res.data.data.list[i]['equipment_number'] + res.data.data.list[i]['number']\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthis.eq_mark_num = equipmentNumber\r\n\t\t\t\t\t\t\t\t\tthis.equipment_number = equipmentNumber\r\n\t\t\t\t\t\t\t\t\tthis.one_eq = 0\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// console.log(equipmentNumber)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// 3.设备区域\r\n\t\t\t\t\t\t\t\tlet use_area = res.data.data.use_area\t//  数组\r\n\t\t\t\t\t\t\t\tuse_area.forEach((item,i)=>{\r\n\t\t\t\t\t\t\t\t\titem.label = item.use_area\r\n\t\t\t\t\t\t\t\t\titem.value = item.use_area\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.use_areas = use_area\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(res.data.data.list.length == 1){\t\t// 选中\r\n\t\t\t\t\t\t\t\t\tthis.equipment_area = res.data.data.list[0].equipment_area\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// 多个设备时，禁止选区域，以及设备区域都为空\r\n\t\t\t\t\t\t\t\tif(res.data.data.list.length > 1){\r\n\t\t\t\t\t\t\t\t\tthis.disabled = false\r\n\t\t\t\t\t\t\t\t\tthis.equipment_area = ''// res.data.data.list[0].equipment_area\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// 4.检查数据\r\n\t\t\t\t\t\t\t\t// typeid == 1 input == 2 select\r\n\t\t\t\t\t\t\t\tthis.typeid = res.data.data.list[0].equipment_type\r\n\t\t\t\t\t\t\t\tlet selectArr = []\r\n\t\t\t\t\t\t\t\tif(res.data.data.list[0].equipment_type ==2)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlet selectList = res.data.data.check_option\r\n\t\t\t\t\t\t\t\t\t// console.log(selectList)\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tselectList.forEach((itemx,index)=>{\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tlet arr_arr = []\r\n\t\t\t\t\t\t\t\t\t\titemx.forEach((item,i)=>{\r\n\t\t\t\t\t\t\t\t\t\t\tarr_arr.push({label:item,value:item})\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\tselectArr.push(arr_arr)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t// console.log(selectArr)\r\n\t\t\t\t\t\t\t\t\tthis.selectList = selectArr\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// 单个设备\r\n\t\t\t\t\t\t\t\tif(res.data.data.list.length == 1){\r\n\t\t\t\t\t\t\t\t\t// 检查数据没有值时\r\n\t\t\t\t\t\t\t\t\tif(res.data.data.list[0].check_datas == null)\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tlet check_targt_arr = res.data.data.check_handle.check_targt\r\n\t\t\t\t\t\t\t\t\t\t// console.log(check_targt_arr)\r\n\t\t\t\t\t\t\t\t\t\tlet check_targt_array = []\r\n\t\t\t\t\t\t\t\t\t\tcheck_targt_arr.forEach((item,i)=>{\r\n\t\t\t\t\t\t\t\t\t\t\tif(res.data.data.list[0].equipment_type==1){\r\n\t\t\t\t\t\t\t\t\t\t\t\tcheck_targt_array.push({label:item,value:0})\r\n\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\tcheck_targt_array.push({label:item,value:0,select:selectArr[i]})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\tthis.check_datas = check_targt_array\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tthis.check_datas = res.data.data.list[0].check_datas\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(res.data.data.list.length > 1){\r\n\t\t\t\t\t\t\t\t\t// 多个设备 - 检查数据 默认数量都设置为1\r\n\t\t\t\t\t\t\t\t\tlet check_datas_arr = res.data.data.check_handle.check_targt\r\n\t\t\t\t\t\t\t\t\tlet check_datas_array = []\r\n\t\t\t\t\t\t\t\t\tcheck_datas_arr.forEach((item,i)=>{\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t// check_datas_array.push({label:item,value:0})\r\n\t\t\t\t\t\t\t\t\t\tif(res.data.data.list[0].equipment_type==1){\r\n\t\t\t\t\t\t\t\t\t\t\t// check_targt_array.push({label:item,value:0})\r\n\t\t\t\t\t\t\t\t\t\t\tcheck_datas_array.push({label:item,value:0})\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t// check_targt_array.push({label:item,value:0,select:selectArr[i]})\r\n\t\t\t\t\t\t\t\t\t\t\tcheck_datas_array.push({label:item,value:0,select:selectArr[i]})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tthis.check_datas = check_datas_array\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// 5.检查与处理\r\n\t\t\t\t\t\t\t\tlet check_handles = res.data.data.check_handle.check_handles\t// 数组\r\n\t\t\t\t\t\t\t\tlet check_handles_arr = []\r\n\t\t\t\t\t\t\t\tcheck_handles.forEach((item,i)=>{\r\n\t\t\t\t\t\t\t\t\tcheck_handles_arr.push({label:item,value:item})\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.check_handles = check_handles_arr\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(res.data.data.list.length == 1){\r\n\t\t\t\t\t\t\t\t\tthis.check_handle = res.data.data.list[0].check_handle\t\t\t// 选中\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// 6.补充说明\r\n\t\t\t\t\t\t\t\tif(res.data.data.list.length == 1){\r\n\t\t\t\t\t\t\t\t\tthis.more_info = res.data.data.list[0].more_info\r\n\t\t\t\t\t\t\t\t\tif(res.data.data.list[0].more_info == \"null\")\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tthis.more_info = ''\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tthis.more_info = res.data.data.list[0].more_info\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.list = res.data.data.list\t\t// 数组\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(res.data.data.list.length>5)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.showmore = 1\r\n\t\t\t\t\t\t\t\t\tthis.all_equipment_number = equipmentNumber\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// 快捷语数组\r\n\t\t\t\t\t\t\t\tlet shortcuts = res.data.data.shortcutContents \t\r\n\t\t\t\t\t\t\t\tlet shortcutsArr = []\r\n\t\t\t\t\t\t\t\tshortcuts.forEach((item,i)=>{\r\n\t\t\t\t\t\t\t\t\tshortcutsArr.push({label:item,value:item})\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.shortcuts = shortcutsArr\r\n\t\t\t\t\t\t\t\tthis.shortcutsOld = shortcutsArr\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tscanCode() {\r\n\t\t\t\tuni.scanCode({\r\n\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\tif(res.result!=''){\r\n\t\t\t\t\t\t\tlet param = {\r\n\t\t\t\t\t\t\t\tstaffid: uni.getStorageSync('staffid'),\r\n\t\t\t\t\t\t\t\tcity: uni.getStorageSync('city'),\r\n\t\t\t\t\t\t\t\tscan_code: res.result,\r\n\t\t\t\t\t\t\t\tjob_id: this.jobid,\r\n\t\t\t\t\t\t\t\tjob_type: this.jobtype,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\turl: `${this.$baseUrl}/addequipmentbyscan`,\r\n\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\r\n\t\t\t\t\t\t\t\t\t'token': uni.getStorageSync('token')\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\t\tdata: param,\r\n\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\tif (res.data.code == 1 && res.data.data!=null) {\r\n\t\t\t\t\t\t\t\t\t\tthis.id = res.data.data\r\n\t\t\t\t\t\t\t\t\t\tthis.data_select();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: res.data.msg\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\ttitle: '扫码错误！'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\teditParkImg(currentTempFilePath) {},\r\n\t\t\tdeleteImg(index) {\r\n\t\t\t\t//删除数据库剩余部分\r\n\t\t\t\tvar del = JSON.parse(JSON.stringify(this.end_site_photos));\r\n\t\t\t\tfor (var i = 0; i < del.length; i++) {\r\n\t\t\t\t\tvar site_po = del[i].replace(/\\\"/g, \"\")\r\n\t\t\t\t\t\t.replace(/[\\\\]/g, '');\r\n\t\t\t\t\tdel[i] = `${this.$baseUrl_imgs}` + site_po;\r\n\t\t\t\t\tif (this.site_photos[index] == del[i])\r\n\t\t\t\t\t\tthis.end_site_photos.splice(i, 1)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetimgList(index) {\r\n\t\t\t\tthis.site_photos = index\r\n\t\t\t},\r\n\t\t\t// 保存\t单个 多个\r\n\t\t\tsave(){\r\n\t\t\t\t\r\n\t\t\t\tlet ids = this.list.map((item) => {\r\n\t\t\t\t    return item.id\r\n\t\t\t\t}).join(',')\r\n\t\t\t\t\r\n\t\t\t\t// console.log(this.equipment_name)\t// 设备名称\r\n\t\t\t\t// console.log(this.equipment_number)\t// 设备编号\r\n\t\t\t\t// console.log(this.equipment_area)\t// 区域\r\n\t\t\t\t// console.log(this.check_datas) \t\t// JSON.stringify(this.check_datas)\r\n\t\t\t\t// console.log(this.check_handle.join(','))\r\n\t\t\t\t// console.log(this.more_info)\r\n\t\t\t\t\r\n\t\t\t\t//验证是否是中文\r\n\t\t\t\t\r\n\t\t\t\tvar pattern = new RegExp(\"[\\u4E00-\\u9FA5]+\");\r\n\t\t\t\t\r\n\t\t\t\tif(pattern.test(this.eq_mark_num)){\r\n\t\t\t\t\t// console.log('该字符串是中文');\r\n\t\t\t\t\tuni.$utils.toast(\"设备编号不能为中文\")\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tlet check_handle = ''\r\n\t\t\t\t// if(this.check_handle != null && this.check_handle  != undefined && this.check_handle !='')\r\n\t\t\t\tif(!!this.check_handle)\r\n\t\t\t\t{\r\n\t\t\t\t\tcheck_handle = this.check_handle.join(',')\r\n\t\t\t\t}\r\n\t\t\t\t// console.log(this.check_handle)\r\n\t\t\t\t// return false\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// id: this.id,\r\n\t\t\t\t\tjob_id: this.jobid,\r\n\t\t\t\t\tjob_type: this.jobtype,\r\n\t\t\t\t\tequipment_name: this.equipment_name,\r\n\t\t\t\t\tequipment_area: this.equipment_area,\r\n\t\t\t\t\tcheck_datas: JSON.stringify(this.check_datas),\r\n\t\t\t\t\tcheck_handle: check_handle,\r\n\t\t\t\t\t// site_photos: this.upload_site_photos,\r\n\t\t\t\t\tmore_info: this.more_info,\r\n\t\t\t\t\teq_number: this.eq_mark_num  // this.equipment_number\r\n\t\t\t\t}\r\n\t\t\t\t// uni.setStorageSync('last_id_' + this.jobid,this.id)\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: `${this.$baseUrl}/Equipment.Equipment/editEq?ids=`+ids,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\r\n\t\t\t\t\t\t'token': uni.getStorageSync('token')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'PUT',\r\n\t\t\t\t\tdata: params,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(res.data.code == 200)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\turl: \"/pages/service/equipment?jobid=\" +\r\n\t\t\t\t\t\t\t\t\t\tthis\r\n\t\t\t\t\t\t\t\t\t\t.jobid + '&jobtype=' + this\r\n\t\t\t\t\t\t\t\t\t\t.jobtype +\r\n\t\t\t\t\t\t\t\t\t\t'&shortcut_type=' +\r\n\t\t\t\t\t\t\t\t\t\tthis.shortcut_type +\r\n\t\t\t\t\t\t\t\t\t\t'&service_type=' + this\r\n\t\t\t\t\t\t\t\t\t\t.service_type + '&ct=' + this\r\n\t\t\t\t\t\t\t\t\t\t.ct\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(res.data.code == 400)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.data.msg,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsavex() {\r\n\t\t\t\tvar imgs = JSON.parse(JSON.stringify(this.site_photos))\r\n\t\t\t\tif (this.equipment_area == '' || this.check_datas == '') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '信息填写不全',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (imgs.length > 4) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '图片最多四张',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: \"保存中...\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\t//图片上传\r\n\t\t\t\t\tif (this.id > 0) {\r\n\t\t\t\t\t\t//上传部分\r\n\t\t\t\t\t\tfor (let i = 0; i < imgs.length; i++) {\r\n\t\t\t\t\t\t\tfor (let j = 0; j < this.start_site_photos.length; j++) {\r\n\t\t\t\t\t\t\t\tif (imgs[i] == this.start_site_photos[j]) { //如果是id相同的，那么a[ j ].id == b[ i ].id\r\n\t\t\t\t\t\t\t\t\timgs.splice(imgs[i], 1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//剩余部分\r\n\t\t\t\t\tif (this.end_site_photos.length > 0) {\r\n\t\t\t\t\t\tthis.upload_site_photos = this.end_site_photos\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0; i < imgs.length; i++) {\r\n\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\turl: `${this.$baseUrl}/upload/imgswx?version=${this.$version}`, // 后端api接口\r\n\t\t\t\t\t\t\tfilePath: imgs[i], // uni.chooseImage函数调用后获取的本地文件路劲\r\n\t\t\t\t\t\t\tname: 'file', //后端通过'file'获取上传的文件对象\r\n\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t'content-type': 'multipart/form-data',\r\n\t\t\t\t\t\t\t\t'token': uni.getStorageSync('token')\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tvar res = JSON.parse(result.data)\r\n\t\t\t\t\t\t\t\tif (res.code === 0) {\r\n\t\t\t\t\t\t\t\t\tvar images_data = res.data.file_name;\r\n\t\t\t\t\t\t\t\t\tif (this.upload_site_photos == '') {\r\n\t\t\t\t\t\t\t\t\t\tthis.upload_site_photos = images_data;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthis.upload_site_photos = this.upload_site_photos + ',' + images_data;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\t\tconsole.log('uploadImage fail', err);\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\tcontent: err.errMsg,\r\n\t\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t//保存信息\r\n\t\t\t\t\t\tlet params = {\r\n\t\t\t\t\t\t\tstaffid: uni.getStorageSync('staffid'),\r\n\t\t\t\t\t\t\tid: this.id,\r\n\t\t\t\t\t\t\tjob_id: this.jobid,\r\n\t\t\t\t\t\t\tjob_type: this.jobtype,\r\n\t\t\t\t\t\t\tequipment_name: this.equipment_name,\r\n\t\t\t\t\t\t\tequipment_area: this.equipment_area,\r\n\t\t\t\t\t\t\tcheck_datas: JSON.stringify(this.check_datas),\r\n\t\t\t\t\t\t\tcheck_handle: this.check_handle,\r\n\t\t\t\t\t\t\tsite_photos: this.upload_site_photos,\r\n\t\t\t\t\t\t\tmore_info: this.more_info,\r\n\t\t\t\t\t\t\teq_mark_num:this.eq_mark_num\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.setStorageSync('last_id_' + this.jobid,this.id)\r\n\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\turl: `${this.$baseUrl}/Saveequipment`,\r\n\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\r\n\t\t\t\t\t\t\t\t'token': uni.getStorageSync('token')\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\tdata: params,\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res.data.msg,\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\turl: \"/pages/service/equipment?jobid=\" +\r\n\t\t\t\t\t\t\t\t\t\t\tthis\r\n\t\t\t\t\t\t\t\t\t\t\t.jobid + '&jobtype=' + this\r\n\t\t\t\t\t\t\t\t\t\t\t.jobtype +\r\n\t\t\t\t\t\t\t\t\t\t\t'&shortcut_type=' +\r\n\t\t\t\t\t\t\t\t\t\t\tthis.shortcut_type +\r\n\t\t\t\t\t\t\t\t\t\t\t'&service_type=' + this\r\n\t\t\t\t\t\t\t\t\t\t\t.service_type + '&ct=' + this\r\n\t\t\t\t\t\t\t\t\t\t\t.ct\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n.new_card {\r\n\tbackground-color: #fff;\r\n\tborder-radius: 10px;\r\n\tpadding-bottom: 10px;\r\n\tmargin: 10px 0px;\r\n}\r\n.new_card_title {\r\n\tborder-bottom: 1px solid #e0dcdc;\r\n\tfont-size: 19px;\r\n\tfont-weight: bold;\r\n\tpadding: 10px;\r\n\theight: 30px;\r\n}\r\n.xh {\r\n\tcolor: #007AFF;\r\n\tfont-weight: bold;\r\n\tfont-size: 21px;\r\n\tmargin-right: 5px;\r\n}\r\n.new_card_title_left {\r\n\tfloat: left;\r\n}\r\n.new_card_title_right {\r\n\tfont-size: 21px;\r\n\tcolor: #d0cece;\r\n\tfloat: right;\r\n}\r\n.new_card_content {\r\n\tmargin: 10px;\r\n\tfont-size: 17px;\r\n}\r\n.new_card_content span {\r\n\tcolor: #5e6165;\r\n}\r\n.tj_bu {\r\n\tposition: relative;\r\n\tbottom: 0px;\r\n\tbackground-color: #007AFF;\r\n\tcolor: #FFFFFF;\r\n\tfont-size: 20px;\r\n}\r\n.lcx {\r\n\tbackground-color: #fff;\r\n\tborder-radius: 10px;\r\n\tpadding-bottom: 10px;\r\n\tmargin: 10px 0px;\r\n\tpadding-top: 10px;\r\n}\r\n.text-left {\r\n\tfloat: left;\r\n}\r\n.text-right {\r\n\tfloat: right;\r\n}\r\n.top_text {\r\n\tbackground-color: #FFFFFF;\r\n\tpadding: 10px;\r\n\tfont-size: 16px;\r\n}\r\n.cl-select__inner {\r\n\theight: 70rpx;\r\n\tline-height: 70rpx;\r\n\tfont-size: 16px;\r\n}\r\n.text {\r\n\tborder-bottom: 1px solid #e0dcdc;\r\n\tmargin: 10px 0px;\r\n\tpadding-bottom: 10px;\r\n}\r\n.num_c {\r\n\tmargin-bottom: 10px;\r\n}\r\n.dcts {\r\n\tcolor: #9c9c9c;\r\n\tfont-size: 14px;\r\n}\r\n.bu {\r\n\tbackground-color: #007AFF;\r\n\tcolor: #FFFFFF;\r\n\theight: 50px;\r\n\ttext-align: center;\r\n\tborder-top: 1px solid #f5f2f2;\r\n\tfont-size: 19px;\r\n\tfont-weight: bold;\r\n\tposition: fixed;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbottom: 0px;\r\n\tline-height: 50px;\r\n}\r\n.cl-checkbox {\r\n\tdisplay: inline-block;\r\n\tline-height: 40rpx;\r\n\tfont-size: 31rpx;\r\n\t-webkit-transition: all 0.3s;\r\n\ttransition: all 0.3s;\r\n}\r\n.cl-textarea textarea {\r\n\tfont-size: 32rpx;\r\n\twidth: 100%;\r\n\tbox-sizing: border-box;\r\n\tfont-size: 32rpx;\r\n}\r\n.cl-textarea {\r\n\tborder: 1rpx solid #dcdfe6;\r\n\tborder-radius: 8rpx;\r\n\twidth: 100%;\r\n\tbox-sizing: border-box;\r\n\tbackground-color: #fff;\r\n\tposition: relative;\r\n\tpadding: 10rpx 10rpx 10rpx 16rpx;\r\n\tline-height: 36rpx;\r\n\tmargin-top: 10px;\r\n}\r\n/* new */\r\n.content {\r\n\tpadding: 10px;\r\n}\r\n.service {\r\n\tpadding-bottom: 15px;\r\n}\r\n.jh {\r\n\tcolor: red;\r\n\tmargin-left: 5px;\r\n}\r\n.service_title {\r\n\t/* color: #03A9F4; */\r\n\tfont-size: 18px;\r\n\tfont-weight: bold;\r\n}\r\n.text-green.data-v-2ee6bce8 {\r\n\tcolor: #12900a;\r\n}\r\npage {\r\n\tbackground-color: #FFFFFF;\r\n}\r\n.service_content {\r\n\tmargin: 8px 0px;\r\n}\r\n.service_content view {\r\n\tmargin: 3px 0px;\r\n}\r\n.lz {\r\n\tmargin: 10px 0px;\r\n}\r\n.new_card_content {\r\n\tmargin: 8px 0px;\r\n\tfont-size: 17px;\r\n}\r\n.more{\r\n\tcolor: #007AFF;\r\n}\r\n</style>\r\n","import mod from \"-!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./scan_equipment.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\软件\\\\HBuilderX.3.6.18.20230117\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./scan_equipment.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1702777039212\n      var cssReload = require(\"E:/软件/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}