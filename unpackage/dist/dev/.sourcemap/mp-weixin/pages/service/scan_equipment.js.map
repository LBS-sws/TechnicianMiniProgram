{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/phpstudy_pro/WWW/qianduan/TechnicianMiniProgram/pages/service/scan_equipment.vue?ec9a","webpack:///D:/phpstudy_pro/WWW/qianduan/TechnicianMiniProgram/pages/service/scan_equipment.vue?2958","webpack:///D:/phpstudy_pro/WWW/qianduan/TechnicianMiniProgram/pages/service/scan_equipment.vue?3684","uni-app:///pages/service/scan_equipment.vue","webpack:///D:/phpstudy_pro/WWW/qianduan/TechnicianMiniProgram/pages/service/scan_equipment.vue?9688","webpack:///D:/phpstudy_pro/WWW/qianduan/TechnicianMiniProgram/pages/service/scan_equipment.vue?2945"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","arr","components","ldSelect","data","name","use_areas","shortcuts","shortcutsOld","jobid","jobtype","shortcut_type","service_type","scan_code","id","areaclick","typeid","showmore","equipment_name","equipment_area","equipment_number","all_equipment_number","number","site_photos","check_datas","check_handle","check_handles","more_info","end_site_photos","start_site_photos","upload_site_photos","search_key","timer","len","ct","disabled","one_eq","eq_mark","eq_mark_num","list","selectList","onLoad","uni","title","icon","setTimeout","methods","inputFun","clearTimer","clearTimeout","showAllEq","content","selectChange","areaChange","data_select","url","header","method","success","console","equipmentNumber","use_area","item","itemx","arr_arr","label","value","selectArr","check_targt_arr","check_targt_array","select","check_datas_arr","check_datas_array","check_handles_arr","shortcutsArr","fail","scanCode","param","staffid","city","job_id","job_type","editParkImg","deleteImg","replace","del","getimgList","save","eq_number","savex","imgs","filePath","showCancel"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,uBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2H;AAC3H;AACkE;AACL;AACa;;;AAG1E;AACyK;AACzK,gBAAgB,6KAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,yFAAM;AACR,EAAE,kGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,6FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,mQAEN;AACP,KAAK;AACL;AACA,aAAa,yQAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,yTAEN;AACP,KAAK;AACL;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACzEA;AAAA;AAAA;AAAA;AAAyoB,CAAgB,wnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC+G7pB;EAAA;EACA;EACA;EACA;IACA;MACAC;IACA;EACA;EACA;AACA;AAAA;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA,eAEA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;EACAC;IACA;IACA;MACAC;QACAC;QACAC;MACA;MACAC;QACA;MACA;IACA;IACA;IACA;IAEA;IACA;IACA;EAEA;EACAC;IAEAC;MAAA;MACA;MACA;MACA;QAEA;UACA;UACA;QACA;MAEA;QACA;QACA;MACA;IACA;IACAC;MACA;QACAC;MACA;IACA;IACAC;MACAR;QACAC;QACAQ;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MAAA;MACA;MACAZ;QACAa;QACAC;UACA;UACA;QACA;QACAC;QACArD;QACAsD;UACAC;UACA;YACA;cACA;cACA;;cAEA;cACA;cACA;cACA,oCACA;gBACA;gBACA;gBACA;cACA;cACA;;cAEA;gBACA;kBACA;oBACAC;kBACA;oBACAA;kBACA;gBACA;gBACA;gBACA;gBACA;cACA;cACA;;cAGA;cACA;cACAC;gBACAC;gBACAA;cACA;cACA;cAEA;gBAAA;;gBAEA,2CACA;kBACA;gBACA;kBACA;gBACA;cACA;cACA;cACA;gBACA;gBACA;cACA;;cAEA;cACA;cACA;cACA;cACA,+CACA;gBAEA;gBACA;;gBAEAtB;kBACA;kBACAuB;oBACAC;sBAAAC;sBAAAC;oBAAA;kBACA;kBACAC;gBACA;gBAEA;cACA;cACA;cACA;gBACA;gBACA,+CACA;kBACA;kBACA;kBACAC;oBACA;sBACAC;wBAAAJ;wBAAAC;sBAAA;oBACA;sBACAG;wBAAAJ;wBAAAC;wBAAAI;sBAAA;oBACA;kBACA;kBACA;gBACA;kBACA;gBACA;cACA;cAEA;gBACA;gBACA;gBACA;gBACAC;kBAEA;oBAEAC;sBAAAP;sBAAAC;oBAAA;kBACA;oBAEAM;sBAAAP;sBAAAC;sBAAAI;oBAAA;kBACA;gBAEA;gBACA;cACA;;cAGA;cACA;cACA;cACA5C;gBACA+C;kBAAAR;kBAAAC;gBAAA;cACA;cACA;cAEA;gBACA;cACA;;cAGA;cACA;gBACA;gBACA,+CACA;kBACA;gBACA;kBACA;gBACA;cACA;cAEA;;cAEA,mCACA;gBACA;gBACA;cACA;;cAEA;cACA;cACA;cACA3D;gBACAmE;kBAAAT;kBAAAC;gBAAA;cACA;cACA;cACA;YACA;UACA;QAEA;QACAS;UACAhB;QACA;MACA;IACA;IACAiB;MAAA;MACAlC;QACAgB;UAAA;YAAA;YAAA;cAAA;gBAAA;kBAAA;oBACA;sBACAmB;wBACAC;wBACAC;wBACAlE;wBACAmE;wBACAC;sBACA;sBACAvC;wBACAa;wBACAC;0BACA;0BACA;wBACA;wBACAC;wBACArD;wBACAsD;0BACA;4BACA;4BACA;0BACA;4BACAhB;8BACAE;8BACAD;4BACA;0BACA;wBAEA;wBACAgC;0BACAhB;wBACA;sBACA;oBACA;sBACAjB;wBACAE;wBACAD;sBACA;oBACA;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA,CAEA;UAAA;YAAA;UAAA;UAAA;QAAA;MACA;IACA;IACAuC;IACAC;MACA;MACA;MACA;QACA,wCACAC;QACAC;QACA,uCACA;MACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MAAA;MAEA;QACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;;MAEA;;MAEA;MAEA;QACA;QACA7C;QACA;MACA;MACA;MACA;MACA,yBACA;QACAjB;MACA;MACA;MACA;MACA;QAEAuD;QACAC;QACA/D;QACAC;QACAK;QACAC;QACA;QACAE;QACA6D;MACA;MAEA9C;QACAa;QACAC;UACA;UACA;QACA;QACAC;QACArD;QACAsD;UACAhB;UACAA;YACAC;YACAC;UACA;UACA,0BACA;YACAC;cACAH;gBACAa,yCACA,OACA9C,6BACAC,UACA,oBACA,uBACA,0BACAE,+BACAsB;cACA;YACA;UACA;UACA,0BACA;YACAQ;cACAC;cACAC;YACA;YACA;UACA;QACA;QACA+B;UACAhB;QACA;MACA;IACA;IACA8B;MAAA;MACA;MACA;QACA/C;UACAC;UACAC;QACA;QACA;MACA;QACAF;UACAC;UACAC;QACA;QACA;MACA;QACAF;UACAC;QACA;QACA;QACA;UACA;UACA;YACA;cACA;gBAAA;gBACA+C;cACA;YACA;UACA;QACA;QACA;QACA;UACA;QACA;QACA;UACAhD;YACAa;YAAA;YACAoC;YAAA;YACAtF;YAAA;YACAmD;cACA;cACA;YACA;YACAE;cACA;cACA;gBACA;gBACA;kBACA;gBACA;kBACA;gBACA;cACA;gBACAhB;kBACAC;kBACAC;gBACA;cACA;YAGA;YACA+B;cACAhB;cACAjB;gBACAS;gBACAyC;cACA;YACA;UACA;QAEA;QACA/C;UACA;UACA;YACAiC;YACAhE;YACAkE;YACAC;YACA/D;YACAC;YACAK;YACAC;YACAF;YACAI;YACAW;UACA;UACAI;UACAA;YACAa;YACAC;cACA;cACA;YACA;YACAC;YACArD;YACAsD;cACAhB;cACAA;gBACAC;gBACAC;cACA;cACAC;gBACAH;kBACAa,yCACA,OACA9C,6BACAC,UACA,oBACA,uBACA,0BACAE,+BACAsB;gBACA;cACA;YACA;YACAyC;cACAhB;YACA;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACxpBA;AAAA;AAAA;AAAA;AAAw6B,CAAgB,62BAAG,EAAC,C;;;;;;;;;;;ACA57B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/service/scan_equipment.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/service/scan_equipment.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./scan_equipment.vue?vue&type=template&id=1fb094c2&\"\nvar renderjs\nimport script from \"./scan_equipment.vue?vue&type=script&lang=js&\"\nexport * from \"./scan_equipment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./scan_equipment.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/service/scan_equipment.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./scan_equipment.vue?vue&type=template&id=1fb094c2&\"","var components\ntry {\n  components = {\n    clRow: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-row/cl-row\" */ \"@/cl-uni/components/cl-row/cl-row.vue\"\n      )\n    },\n    clCol: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-col/cl-col\" */ \"@/cl-uni/components/cl-col/cl-col.vue\"\n      )\n    },\n    clInput: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-input/cl-input\" */ \"@/cl-uni/components/cl-input/cl-input.vue\"\n      )\n    },\n    clSelect: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-select/cl-select\" */ \"@/cl-uni/components/cl-select/cl-select.vue\"\n      )\n    },\n    clInputNumber: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-input-number/cl-input-number\" */ \"@/cl-uni/components/cl-input-number/cl-input-number.vue\"\n      )\n    },\n    clCheckboxGroup: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-checkbox-group/cl-checkbox-group\" */ \"@/cl-uni/components/cl-checkbox-group/cl-checkbox-group.vue\"\n      )\n    },\n    clCheckbox: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-checkbox/cl-checkbox\" */ \"@/cl-uni/components/cl-checkbox/cl-checkbox.vue\"\n      )\n    },\n    ldSelect: function () {\n      return import(\n        /* webpackChunkName: \"components/ld-select/ld-select\" */ \"@/components/ld-select/ld-select.vue\"\n      )\n    },\n    clTextarea: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-textarea/cl-textarea\" */ \"@/cl-uni/components/cl-textarea/cl-textarea.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./scan_equipment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./scan_equipment.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"content\" style=\"margin-bottom: 40px;\">\n\t\t<view class=\"service\">\n\t\t\t<view class=\"service_content\">\n\t\t\t\t<!-- <cl-row>\n\t\t\t\t\t<view class=\"text-left\">设备二维码</view>\n\t\t\t\t\t<view class=\"text-right\">\n\t\t\t\t\t\t<cl-icon name=\"cl-icon-scan\" color=\"#007AFF\" :size=\"60\" class=\"scan\" @tap=\"scanCode()\"></cl-icon>\n\t\t\t\t\t</view>\n\t\t\t\t</cl-row> -->\n\t\t\t\t<cl-row>\n\t\t\t\t\t<view class=\"text-left\" >设备编号</view>\n\t\t\t\t\t<view class=\"text-right\" style=\"width: 70%;\">\n\t\t\t\t\t\t<view v-if=\"one_eq == 1\">\n\t\t\t\t\t\t\t<cl-col span=\"12\" style=\"text-align: right;\">\n\t\t\t\t\t\t\t\t{{eq_mark}}\n\t\t\t\t\t\t\t</cl-col>\n\t\t\t\t\t\t\t<cl-col span=\"12\">\n\t\t\t\t\t\t\t\t<cl-input  v-model=\"eq_mark_num\" placeholder=\"自定义\"  />\n\t\t\t\t\t\t\t</cl-col>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view v-if=\"one_eq == 0\">\n\t\t\t\t\t\t\t{{equipment_number}}\n\t\t\t\t\t\t\t<span v-if=\"showmore\" @click=\"showAllEq\" class=\"more\">\n\t\t\t\t\t\t\t\t更多\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t</view>\n\t\t\t\t</cl-row>\n\t\t\t\t<cl-row>\n\t\t\t\t\t<view class=\"text-left\">设备名称</view>\n\t\t\t\t\t<view class=\"text-right\">{{equipment_name}}</view>\n\t\t\t\t</cl-row>\n\t\t\t\t<cl-row >\n\t\t\t\t\t<view class=\"text-left\" style=\"margin-top: 15px;\">设备区域</view>\n\t\t\t\t\t<view class=\"text-right\" style=\"width: 70%;\" v-if=\"areaclick\">\n\t\t\t\t\t\t<cl-col span=\"12\">\n\t\t\t\t\t\t<cl-input  :disabled=\"disabled\"   v-model=\"equipment_area\" placeholder=\"自定义\"   />\n\t\t\t\t\t\t</cl-col>\n\t\t\t\t\t\t<cl-col span=\"12\">\n\t\t\t\t\t\t<cl-select  :disabled=\"disabled\" v-model=\"equipment_area\" :options=\"use_areas\"></cl-select>\n\t\t\t\t\t\t</cl-col>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"text-right\" style=\"width: 70%;\" v-else>\n\t\t\t\t\t\t<cl-col span=\"12\">\n\t\t\t\t\t\t<cl-input  :disabled=\"!disabled\"  v-model=\"equipment_area\" placeholder=\"自定义\"   />\n\t\t\t\t\t\t</cl-col>\n\t\t\t\t\t\t<cl-col span=\"12\">\n\t\t\t\t\t\t<cl-select  :disabled=\"!disabled\"  v-model=\"equipment_area\" :options=\"use_areas\"></cl-select>\n\t\t\t\t\t\t</cl-col>\n\t\t\t\t\t</view>\n\t\t\t\t</cl-row>\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"service\">\n\t\t\t<view class=\"service_title\">检查数据</view>\n\t\t\t<!-- v-if=\"typeid==1\" -->\n\t\t\t<!-- 1数量输入 2数据输入 -->\n\t\t\t<template v-if=\"typeid==1\">\n\t\t\t\t<view class=\"new_card_content\">\n\t\t\t\t\t<view>\n\t\t\t\t\t\t<view v-for=\"(check, index_cd) in check_datas\" :key=\"index_cd\">\n\t\t\t\t\t\t  <view class=\"num_c\">\n\t\t\t\t\t\t\t{{check.label}}\n\t\t\t\t\t\t\t<cl-input-number :input=true :max=1000000 v-model=\"check.value\" style=\"margin-left: 10px;\"></cl-input-number>\n\t\t\t\t\t\t  </view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<view class=\"new_card_content\">\n\t\t\t\t\t<cl-row>\n\t\t\t\t\t\t<cl-col v-for=\"(check, index) in check_datas\" :key=\"index\">\n\t\t\t\t\t\t  <view class=\"num_c\">\n\t\t\t\t\t\t\t<view style=\"float: left;margin: 7px;\">{{check.label}}</view>\n\t\t\t\t\t\t\t<view style=\"float: right;\">\n\t\t\t\t\t\t\t  <cl-select v-model=\"check.value\" :options=\"check.select\"></cl-select>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t  </view>\n\t\t\t\t\t\t</cl-col>\n\t\t\t\t\t</cl-row>\n\t\t\t\t</view>\n\t\t\t</template>\n\t\t</view>\n\t\t<view class=\"service\">\n\t\t\t<view class=\"service_title\">检查与处理<span class=\"dcts\">(可多选)</span></view>\n\t\t\t<view class=\"service_content\">\n\t\t\t\t<cl-checkbox-group v-model=\"check_handle\" border>\n\t\t\t\t\t<cl-checkbox v-for=\"(checkup,index_c) in check_handles\" :key=\"index_c\" v-bind:label=\"checkup.value\">\n\t\t\t\t\t\t{{checkup.label}}\n\t\t\t\t\t</cl-checkbox>\n\t\t\t\t</cl-checkbox-group>\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"service\">\n\t\t\t<view class=\"service_title\">补充说明</view>\n\t\t\t<view class=\"lz\">\n\t\t\t\t<ld-select :multiple=\"true\" :list=\"shortcuts\" @inputFun=\"inputFun\" label-key=\"label\" value-key=\"value\"\n\t\t\t\t\tplaceholder=\"示例\" clearable v-model=\"more_info\" @change=\"selectChange\"></ld-select>\n\t\t\t</view>\n\t\t\t<cl-textarea rows=\"13\" cols=\"40\" placeholder=\"请输入\" v-model=\"more_info\" count></cl-textarea>\n\t\t</view>\n\t\t<view class=\"bu\" @tap=\"save()\">\n\t\t\t保存\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nexport const fuzzyQuery = (list, keyWord, attribute = 'value') => {\n\tconst reg = new RegExp(keyWord)\n\tconst arr = []\n\tfor (let i = 0; i < list.length; i++) {\n\t\tif (reg.test(list[i][attribute])) {\n\t\t\tarr.push(list[i])\n\t\t}\n\t}\n\treturn arr\n}\nimport ldSelect from '@/components/ld-select/ld-select.vue';\nexport default {\n\tcomponents: {\n\t\t\tldSelect\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tname:'设备详情',\n\t\t\tuse_areas: [],\n\t\t\tshortcuts: [],\n\t\t\tshortcutsOld:[],\n\t\t\tjobid: '',\n\t\t\tjobtype: '',\n\t\t\tshortcut_type: '',\n\t\t\tservice_type: '',\n\t\t\tscan_code: '',\n\t\t\tid: '',\n\t\t\tareaclick:0,\n\t\t\ttypeid: 0,\n\t\t\tshowmore:0,\n\t\t\tequipment_name: '',\n\t\t\tequipment_area: '',\n\t\t\tequipment_number: '',\n\t\t\tall_equipment_number: '',\n\t\t\tnumber: '',\n\t\t\tsite_photos: '',\n\t\t\tcheck_datas: [],\n\t\t\tcheck_handle: [],//'',\n\t\t\tcheck_handles: '',\n\t\t\tmore_info: [],\n\t\t\tend_site_photos: '',\n\t\t\tstart_site_photos: '',\n\t\t\tupload_site_photos: '',\n\t\t\tsearch_key: '',\n\t\t\ttimer: null,\n\t\t\tlen: false,\n\t\t\tct:0,\n\t\t\tdisabled:true,\t// 单个设备true 多个设备false\t\n\t\t\tone_eq:1,\t\t// 1为单个设备，0为多个设备\n\t\t\teq_mark:'',\t\t// 设备标识\n\t\t\teq_mark_num:'', // 设备编号\n\t\t\tlist:[]\t\t\t,// 储存list\n\t\t\tselectList:[]\n\t\t}\n\t},\n\tonLoad(index) {\n\t\tvar loginRes = this.checkLogin();\n\t\tif (!loginRes) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: \"请先登录\",\n\t\t\t\ticon: 'none',\n\t\t\t});\n\t\t\tsetTimeout(() => {\n\t\t\t\treturn false\n\t\t\t}, 2000);\n\t\t}\n\t\tthis.jobid = index.jobid\n\t\tthis.jobtype = index.jobtype\n\t\t\n\t\tthis.id = index.id\n\t\t// this.ct = uni.getStorageSync('ct')\n\t\tthis.data_select()\n\t\t\n\t},\n\tmethods: {\n\t\t\t\n\t\t\tinputFun(data) {\n\t\t\t\tthis.search_key = data.value;\n\t\t\t\tthis.clearTimer()\n\t\t\t\tif (this.search_key && this.search_key.length > 0) {\n\t\t\t\t\t\n\t\t\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\t\t\tlet result = fuzzyQuery(this.shortcuts, this.search_key, 'value') // 数组、搜索值、字段\n\t\t\t\t\t\tthis.shortcuts = result\n\t\t\t\t\t}, 500)\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t// 恢复原来值\n\t\t\t\t\tthis.shortcuts = this.shortcutsOld\n\t\t\t\t}\n\t\t\t},\n\t\t\tclearTimer() {\n\t\t\t\tif (this.timer) {\n\t\t\t\t\tclearTimeout(this.timer)\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowAllEq(){\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '全部设备编号',\n\t\t\t\t\tcontent: this.all_equipment_number,\n\t\t\t\t});\n\t\t\t},\n\t\t\tselectChange(val) {\n\t\t\t\tthis.more_info = val\n\t\t\t},\n\t\t\tareaChange(val) {\n\t\t\t\tthis.equipment_area = val\n\t\t\t},\n\t\t\t// 详情\n\t\t\tdata_select() {\n\t\t\t\tlet param = {}\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `${this.$baseUrl}/Equipment.Equipment/getEqInfo?job_type=` + this.jobtype + \"&job_id=\" + this.jobid + \"&ids=\" + this.id,\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t\t'token': uni.getStorageSync('token')\n\t\t\t\t\t},\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: param,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log(res.data.data)\n\t\t\t\t\t\tif (res.data.code == 200) {\n\t\t\t\t\t\t\tif (res.data.data) {\n\t\t\t\t\t\t\t\t// 1.设备名称\n\t\t\t\t\t\t\t\tthis.equipment_name = res.data.data.eq_name\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 2.设备编号\n\t\t\t\t\t\t\t\tvar equipmentNumber = '';\n\t\t\t\t\t\t\t\t// 单个\n\t\t\t\t\t\t\t\tif(res.data.data.list.length == 1)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.eq_mark = res.data.data.list[0]['equipment_number']\t// 设备标识\n\t\t\t\t\t\t\t\t\tthis.eq_mark_num = res.data.data.list[0]['number']\t\t\t// 设备编号\n\t\t\t\t\t\t\t\t\tthis.equipment_number = res.data.data.list[0]['number']\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// 多个\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(res.data.data.list.length>1){\n\t\t\t\t\t\t\t\t\tfor(let i=0;i<res.data.data.list.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(equipmentNumber == ''){\n\t\t\t\t\t\t\t\t\t\t\tequipmentNumber = res.data.data.list[i]['equipment_number'] + res.data.data.list[i]['number']\n\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\tequipmentNumber = equipmentNumber + ',' +res.data.data.list[i]['equipment_number'] + res.data.data.list[i]['number']\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthis.eq_mark_num = equipmentNumber\n\t\t\t\t\t\t\t\t\tthis.equipment_number = equipmentNumber\n\t\t\t\t\t\t\t\t\tthis.one_eq = 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// console.log(equipmentNumber)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 3.设备区域\n\t\t\t\t\t\t\t\tlet use_area = res.data.data.use_area\t//  数组\n\t\t\t\t\t\t\t\tuse_area.forEach((item,i)=>{\n\t\t\t\t\t\t\t\t\titem.label = item.use_area\n\t\t\t\t\t\t\t\t\titem.value = item.use_area\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tthis.use_areas = use_area\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(res.data.data.list.length == 1){\t\t// 选中\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif(!res.data.data.list[0].equipment_area)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.equipment_area = ''\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tthis.equipment_area = res.data.data.list[0].equipment_area\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// 多个设备时，禁止选区域，以及设备区域都为空\n\t\t\t\t\t\t\t\tif(res.data.data.list.length > 1){\n\t\t\t\t\t\t\t\t\tthis.disabled = false\n\t\t\t\t\t\t\t\t\tthis.equipment_area = ''\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 4.检查数据\n\t\t\t\t\t\t\t\t// typeid == 1 input == 2 select\n\t\t\t\t\t\t\t\tthis.typeid = res.data.data.list[0].equipment_type\n\t\t\t\t\t\t\t\tlet selectArr = []\n\t\t\t\t\t\t\t\tif(res.data.data.list[0].equipment_type ==2)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// let selectList = res.data.data.check_option\n\t\t\t\t\t\t\t\t\tlet selectList = Object.entries(res.data.data.check_option)\t\t//  对象转数组\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tselectList.forEach((itemx,index)=>{\n\t\t\t\t\t\t\t\t\t\tlet arr_arr = []\n\t\t\t\t\t\t\t\t\t\titemx.forEach((item,i)=>{\n\t\t\t\t\t\t\t\t\t\t\tarr_arr.push({label:item,value:item})\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\tselectArr.push(arr_arr)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.selectList = selectArr\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// 单个设备\n\t\t\t\t\t\t\t\tif(res.data.data.list.length == 1){\n\t\t\t\t\t\t\t\t\t// 检查数据没有值时\n\t\t\t\t\t\t\t\t\tif(res.data.data.list[0].check_datas == null)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlet check_targt_arr = res.data.data.check_handle.check_targt\t\n\t\t\t\t\t\t\t\t\t\tlet check_targt_array = []\n\t\t\t\t\t\t\t\t\t\tcheck_targt_arr.forEach((item,i)=>{\n\t\t\t\t\t\t\t\t\t\t\tif(res.data.data.list[0].equipment_type==1){\n\t\t\t\t\t\t\t\t\t\t\t\tcheck_targt_array.push({label:item,value:0})\n\t\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\t\tcheck_targt_array.push({label:item,value:'',select:selectArr[i]})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\tthis.check_datas = check_targt_array\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tthis.check_datas = res.data.data.list[0].check_datas\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(res.data.data.list.length > 1){\n\t\t\t\t\t\t\t\t\t// 多个设备 - 检查数据 默认数量都设置为1\n\t\t\t\t\t\t\t\t\tlet check_datas_arr = res.data.data.check_handle.check_targt\n\t\t\t\t\t\t\t\t\tlet check_datas_array = []\n\t\t\t\t\t\t\t\t\tcheck_datas_arr.forEach((item,i)=>{\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tif(res.data.data.list[0].equipment_type==1){\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tcheck_datas_array.push({label:item,value:0})\n\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tcheck_datas_array.push({label:item,value:'',select:selectArr[i]})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\tthis.check_datas = check_datas_array\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 5.检查与处理\n\t\t\t\t\t\t\t\tlet check_handles = res.data.data.check_handle.check_handles\t// 数组\n\t\t\t\t\t\t\t\tlet check_handles_arr = []\n\t\t\t\t\t\t\t\tcheck_handles.forEach((item,i)=>{\n\t\t\t\t\t\t\t\t\tcheck_handles_arr.push({label:item,value:item})\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tthis.check_handles = check_handles_arr\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(res.data.data.list.length == 1){\n\t\t\t\t\t\t\t\t\tthis.check_handle = res.data.data.list[0].check_handle\t\t\t// 选中\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 6.补充说明\n\t\t\t\t\t\t\t\tif(res.data.data.list.length == 1){\n\t\t\t\t\t\t\t\t\tthis.more_info = res.data.data.list[0].more_info\n\t\t\t\t\t\t\t\t\tif(res.data.data.list[0].more_info == \"null\")\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.more_info = ''\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tthis.more_info = res.data.data.list[0].more_info\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tthis.list = res.data.data.list\t\t// 数组\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(res.data.data.list.length>5)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.showmore = 1\n\t\t\t\t\t\t\t\t\tthis.all_equipment_number = equipmentNumber\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 快捷语数组\n\t\t\t\t\t\t\t\tlet shortcuts = res.data.data.shortcutContents \t\n\t\t\t\t\t\t\t\tlet shortcutsArr = []\n\t\t\t\t\t\t\t\tshortcuts.forEach((item,i)=>{\n\t\t\t\t\t\t\t\t\tshortcutsArr.push({label:item,value:item})\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tthis.shortcuts = shortcutsArr\n\t\t\t\t\t\t\t\tthis.shortcutsOld = shortcutsArr\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} \n\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tscanCode() {\n\t\t\t\tuni.scanCode({\n\t\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\t\tif(res.result!=''){\n\t\t\t\t\t\t\tlet param = {\n\t\t\t\t\t\t\t\tstaffid: uni.getStorageSync('staffid'),\n\t\t\t\t\t\t\t\tcity: uni.getStorageSync('city'),\n\t\t\t\t\t\t\t\tscan_code: res.result,\n\t\t\t\t\t\t\t\tjob_id: this.jobid,\n\t\t\t\t\t\t\t\tjob_type: this.jobtype,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\turl: `${this.$baseUrl}/addequipmentbyscan`,\n\t\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t\t\t\t\t'token': uni.getStorageSync('token')\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\tdata: param,\n\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\tif (res.data.code == 1 && res.data.data!=null) {\n\t\t\t\t\t\t\t\t\t\tthis.id = res.data.data\n\t\t\t\t\t\t\t\t\t\tthis.data_select();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\t\t\ttitle: res.data.msg\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\ttitle: '扫码错误！'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\teditParkImg(currentTempFilePath) {},\n\t\t\tdeleteImg(index) {\n\t\t\t\t//删除数据库剩余部分\n\t\t\t\tvar del = JSON.parse(JSON.stringify(this.end_site_photos));\n\t\t\t\tfor (var i = 0; i < del.length; i++) {\n\t\t\t\t\tvar site_po = del[i].replace(/\\\"/g, \"\")\n\t\t\t\t\t\t.replace(/[\\\\]/g, '');\n\t\t\t\t\tdel[i] = `${this.$baseUrl_imgs}` + site_po;\n\t\t\t\t\tif (this.site_photos[index] == del[i])\n\t\t\t\t\t\tthis.end_site_photos.splice(i, 1)\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetimgList(index) {\n\t\t\t\tthis.site_photos = index\n\t\t\t},\n\t\t\t// 保存\t单个 多个\n\t\t\tsave(){\n\t\t\t\t\n\t\t\t\tlet ids = this.list.map((item) => {\n\t\t\t\t    return item.id\n\t\t\t\t}).join(',')\n\t\t\t\t\n\t\t\t\t// console.log(this.equipment_name)\t// 设备名称\n\t\t\t\t// console.log(this.equipment_number)\t// 设备编号\n\t\t\t\t// console.log(this.equipment_area)\t// 区域\n\t\t\t\t// console.log(this.check_datas) \t\t// JSON.stringify(this.check_datas)\n\t\t\t\t// console.log(this.check_handle.join(','))\n\t\t\t\t// console.log(this.more_info)\n\t\t\t\t\n\t\t\t\t//验证是否是中文\n\t\t\t\t\n\t\t\t\tvar pattern = new RegExp(\"[\\u4E00-\\u9FA5]+\");\n\t\t\t\t\n\t\t\t\tif(pattern.test(this.eq_mark_num)){\n\t\t\t\t\t// console.log('该字符串是中文');\n\t\t\t\t\tuni.$utils.toast(\"设备编号不能为中文\")\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tlet check_handle = ''\n\t\t\t\t// if(this.check_handle != null && this.check_handle  != undefined && this.check_handle !='')\n\t\t\t\tif(!!this.check_handle)\n\t\t\t\t{\n\t\t\t\t\tcheck_handle = this.check_handle.join(',')\n\t\t\t\t}\n\t\t\t\t// console.log(this.check_handle)\n\t\t\t\t// return false\n\t\t\t\tlet params = {\n\t\t\t\t\t\n\t\t\t\t\tjob_id: this.jobid,\n\t\t\t\t\tjob_type: this.jobtype,\n\t\t\t\t\tequipment_name: this.equipment_name,\n\t\t\t\t\tequipment_area: this.equipment_area,\n\t\t\t\t\tcheck_datas: JSON.stringify(this.check_datas),\n\t\t\t\t\tcheck_handle: check_handle,\n\t\t\t\t\t// site_photos: this.upload_site_photos,\n\t\t\t\t\tmore_info: this.more_info,\n\t\t\t\t\teq_number: this.eq_mark_num\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `${this.$baseUrl}/Equipment.Equipment/editEq?ids=`+ids,\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t\t'token': uni.getStorageSync('token')\n\t\t\t\t\t},\n\t\t\t\t\tmethod: 'PUT',\n\t\t\t\t\tdata: params,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.data.msg,\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(res.data.code == 200)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\turl: \"/pages/service/equipment?jobid=\" +\n\t\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t\t\t.jobid + '&jobtype=' + this\n\t\t\t\t\t\t\t\t\t\t.jobtype +\n\t\t\t\t\t\t\t\t\t\t'&shortcut_type=' +\n\t\t\t\t\t\t\t\t\t\tthis.shortcut_type +\n\t\t\t\t\t\t\t\t\t\t'&service_type=' + this\n\t\t\t\t\t\t\t\t\t\t.service_type + '&ct=' + this\n\t\t\t\t\t\t\t\t\t\t.ct\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(res.data.code == 400)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: res.data.msg,\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tsavex() {\n\t\t\t\tvar imgs = JSON.parse(JSON.stringify(this.site_photos))\n\t\t\t\tif (this.equipment_area == '' || this.check_datas == '') {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '信息填写不全',\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t} else if (imgs.length > 4) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '图片最多四张',\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle: \"保存中...\"\n\t\t\t\t\t});\n\t\t\t\t\t//图片上传\n\t\t\t\t\tif (this.id > 0) {\n\t\t\t\t\t\t//上传部分\n\t\t\t\t\t\tfor (let i = 0; i < imgs.length; i++) {\n\t\t\t\t\t\t\tfor (let j = 0; j < this.start_site_photos.length; j++) {\n\t\t\t\t\t\t\t\tif (imgs[i] == this.start_site_photos[j]) { //如果是id相同的，那么a[ j ].id == b[ i ].id\n\t\t\t\t\t\t\t\t\timgs.splice(imgs[i], 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//剩余部分\n\t\t\t\t\tif (this.end_site_photos.length > 0) {\n\t\t\t\t\t\tthis.upload_site_photos = this.end_site_photos\n\t\t\t\t\t}\n\t\t\t\t\tfor (var i = 0; i < imgs.length; i++) {\n\t\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\t\turl: `${this.$baseUrl}/upload/imgswx?version=${this.$version}`, // 后端api接口\n\t\t\t\t\t\t\tfilePath: imgs[i], // uni.chooseImage函数调用后获取的本地文件路劲\n\t\t\t\t\t\t\tname: 'file', //后端通过'file'获取上传的文件对象\n\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t'content-type': 'multipart/form-data',\n\t\t\t\t\t\t\t\t'token': uni.getStorageSync('token')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tvar res = JSON.parse(result.data)\n\t\t\t\t\t\t\t\tif (res.code === 0) {\n\t\t\t\t\t\t\t\t\tvar images_data = res.data.file_name;\n\t\t\t\t\t\t\t\t\tif (this.upload_site_photos == '') {\n\t\t\t\t\t\t\t\t\t\tthis.upload_site_photos = images_data;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tthis.upload_site_photos = this.upload_site_photos + ',' + images_data;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: res.msg,\n\t\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\tconsole.log('uploadImage fail', err);\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\tcontent: err.errMsg,\n\t\t\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t//保存信息\n\t\t\t\t\t\tlet params = {\n\t\t\t\t\t\t\tstaffid: uni.getStorageSync('staffid'),\n\t\t\t\t\t\t\tid: this.id,\n\t\t\t\t\t\t\tjob_id: this.jobid,\n\t\t\t\t\t\t\tjob_type: this.jobtype,\n\t\t\t\t\t\t\tequipment_name: this.equipment_name,\n\t\t\t\t\t\t\tequipment_area: this.equipment_area,\n\t\t\t\t\t\t\tcheck_datas: JSON.stringify(this.check_datas),\n\t\t\t\t\t\t\tcheck_handle: this.check_handle,\n\t\t\t\t\t\t\tsite_photos: this.upload_site_photos,\n\t\t\t\t\t\t\tmore_info: this.more_info,\n\t\t\t\t\t\t\teq_mark_num:this.eq_mark_num\n\t\t\t\t\t\t}\n\t\t\t\t\t\tuni.setStorageSync('last_id_' + this.jobid,this.id)\n\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\turl: `${this.$baseUrl}/Saveequipment`,\n\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t\t\t\t'token': uni.getStorageSync('token')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: params,\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: res.data.msg,\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\turl: \"/pages/service/equipment?jobid=\" +\n\t\t\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t\t\t\t.jobid + '&jobtype=' + this\n\t\t\t\t\t\t\t\t\t\t\t.jobtype +\n\t\t\t\t\t\t\t\t\t\t\t'&shortcut_type=' +\n\t\t\t\t\t\t\t\t\t\t\tthis.shortcut_type +\n\t\t\t\t\t\t\t\t\t\t\t'&service_type=' + this\n\t\t\t\t\t\t\t\t\t\t\t.service_type + '&ct=' + this\n\t\t\t\t\t\t\t\t\t\t\t.ct\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 1000)\n\t\t\t\t}\n\t\t\t}\n\t}\n}\n</script>\n\n<style>\n.new_card {\n\tbackground-color: #fff;\n\tborder-radius: 10px;\n\tpadding-bottom: 10px;\n\tmargin: 10px 0px;\n}\n.new_card_title {\n\tborder-bottom: 1px solid #e0dcdc;\n\tfont-size: 19px;\n\tfont-weight: bold;\n\tpadding: 10px;\n\theight: 30px;\n}\n.xh {\n\tcolor: #007AFF;\n\tfont-weight: bold;\n\tfont-size: 21px;\n\tmargin-right: 5px;\n}\n.new_card_title_left {\n\tfloat: left;\n}\n.new_card_title_right {\n\tfont-size: 21px;\n\tcolor: #d0cece;\n\tfloat: right;\n}\n.new_card_content {\n\tmargin: 10px;\n\tfont-size: 17px;\n}\n.new_card_content span {\n\tcolor: #5e6165;\n}\n.tj_bu {\n\tposition: relative;\n\tbottom: 0px;\n\tbackground-color: #007AFF;\n\tcolor: #FFFFFF;\n\tfont-size: 20px;\n}\n.lcx {\n\tbackground-color: #fff;\n\tborder-radius: 10px;\n\tpadding-bottom: 10px;\n\tmargin: 10px 0px;\n\tpadding-top: 10px;\n}\n.text-left {\n\tfloat: left;\n}\n.text-right {\n\tfloat: right;\n}\n.top_text {\n\tbackground-color: #FFFFFF;\n\tpadding: 10px;\n\tfont-size: 16px;\n}\n.cl-select__inner {\n\theight: 70rpx;\n\tline-height: 70rpx;\n\tfont-size: 16px;\n}\n.text {\n\tborder-bottom: 1px solid #e0dcdc;\n\tmargin: 10px 0px;\n\tpadding-bottom: 10px;\n}\n.num_c {\n\tmargin-bottom: 10px;\n}\n.dcts {\n\tcolor: #9c9c9c;\n\tfont-size: 14px;\n}\n.bu {\n\tbackground-color: #007AFF;\n\tcolor: #FFFFFF;\n\theight: 50px;\n\ttext-align: center;\n\tborder-top: 1px solid #f5f2f2;\n\tfont-size: 19px;\n\tfont-weight: bold;\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0px;\n\tline-height: 50px;\n}\n.cl-checkbox {\n\tdisplay: inline-block;\n\tline-height: 40rpx;\n\tfont-size: 31rpx;\n\t-webkit-transition: all 0.3s;\n\ttransition: all 0.3s;\n}\n.cl-textarea textarea {\n\tfont-size: 32rpx;\n\twidth: 100%;\n\tbox-sizing: border-box;\n\tfont-size: 32rpx;\n}\n.cl-textarea {\n\tborder: 1rpx solid #dcdfe6;\n\tborder-radius: 8rpx;\n\twidth: 100%;\n\tbox-sizing: border-box;\n\tbackground-color: #fff;\n\tposition: relative;\n\tpadding: 10rpx 10rpx 10rpx 16rpx;\n\tline-height: 36rpx;\n\tmargin-top: 10px;\n}\n/* new */\n.content {\n\tpadding: 10px;\n}\n.service {\n\tpadding-bottom: 15px;\n}\n.jh {\n\tcolor: red;\n\tmargin-left: 5px;\n}\n.service_title {\n\t/* color: #03A9F4; */\n\tfont-size: 18px;\n\tfont-weight: bold;\n}\n.text-green.data-v-2ee6bce8 {\n\tcolor: #12900a;\n}\npage {\n\tbackground-color: #FFFFFF;\n}\n.service_content {\n\tmargin: 8px 0px;\n}\n.service_content view {\n\tmargin: 3px 0px;\n}\n.lz {\n\tmargin: 10px 0px;\n}\n.new_card_content {\n\tmargin: 8px 0px;\n\tfont-size: 17px;\n}\n.more{\n\tcolor: #007AFF;\n}\n</style>\n","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./scan_equipment.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./scan_equipment.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1708243208251\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}