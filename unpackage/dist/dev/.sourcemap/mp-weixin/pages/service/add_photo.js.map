{"version":3,"sources":["uni-app:///main.js","webpack:///D:/phpstudy_pro/WWW/qianduan/TechnicianMiniProgram/pages/service/add_photo.vue?9492","webpack:///D:/phpstudy_pro/WWW/qianduan/TechnicianMiniProgram/pages/service/add_photo.vue?76de","webpack:///D:/phpstudy_pro/WWW/qianduan/TechnicianMiniProgram/pages/service/add_photo.vue?f786","webpack:///D:/phpstudy_pro/WWW/qianduan/TechnicianMiniProgram/pages/service/add_photo.vue?d8c6","uni-app:///pages/service/add_photo.vue","webpack:///D:/phpstudy_pro/WWW/qianduan/TechnicianMiniProgram/pages/service/add_photo.vue?5581","webpack:///D:/phpstudy_pro/WWW/qianduan/TechnicianMiniProgram/pages/service/add_photo.vue?f8ad"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","ldSelect","newUpload","data","name","noClick","upload_site_photos","site_photos","remarks","tablename","id","jobid","jobtype","shortcut_type","service_type","shortcuts","shortcutsOld","custInfo","search_key","timer","len","percent","imageNum","upPicUrl","init_photos","headerUpload","type","formData","onLoad","uni","title","icon","setTimeout","console","methods","inputFun","clearTimer","clearTimeout","getCache","selectChange","getItem","url","header","method","success","strArr","imgurl","that","fail","onBeforeUpload","handleChange3","handleLoaded3","imageStr","getshortcuts","job_type","job_id","shortcutsArr","label","value","del","message","callback","action","add","log","save","arr"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,kBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;AACc;;;AAGtE;AACyK;AACzK,gBAAgB,6KAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6PAEN;AACP,KAAK;AACL;AACA,aAAa,yNAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrDA;AAAA;AAAA;AAAA;AAAooB,CAAgB,mnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCyCxpB;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;QACA;MACA;MACAC;MACAC;QACAD;MACA;IACA;EACA;EACAE;IACA;IACA;MACAC;QACAC;QACAC;MACA;MACAC;QACA;MACA;IACA;IAEA;IACA;IACA;IACA;IACA;IAEA;MACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IAEAC;EACA;EACAC;IAEA;AACA;AACA;AACA;IACAC;MAAA;MAEA;MACA;MACA;QAEA;UACA;UACA;QACA;MAEA;QACA;QACA;MACA;IACA;IACAC;MACA;QACAC;MACA;IACA;IACA;AACA;AACA;AACA;IACAC;MAAA;MACA;MACA;QACA;UAAA;UACA;QACA;QACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;QACA9B;MACA;MACAmB;QACAY;QACAC;UACA;UACA;QACA;QACAC;QACAxC;QACAyC;UACA;YACA;cAAA;cACA;;cAEA;cACA;gBAEAC;kBAEA;kBACAC;kBACA;gBACA;gBAEA;cACA;cAEAC;YACA;UACA;YACA,0BACA;cACAlB;cACA;YACA;UACA;QAEA;QACAmB;UACAf;QACA;MACA;IACA;IACAgB;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IAAA,CACA;IAEAC;MACA;IACA;IAEA;IACAC;MACAlB;MACAA;MACA;MACA;QACAmB;MACA;MACA;MACA;QACAA;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MAEA;QACAC;QACAC;MACA;MACA1B;QACAY;QACAC;UACA;UACA;QACA;QACAC;QACAxC;QACAyC;UACA;YACA;;YAEA;YACA;YACA7B;cACAyC;gBACAC;gBACAC;cACA;YACA;YACA;;YAEA;YACA;UAEA;YACA7B;cACAC;YACA;UACA;QACA;QACAkB;UACAf;QACA;MACA;IACA;IACA;IACA0B;MAAA;MAEA;QACA7B;QACA8B;QACAC,kCAEA;UAAA,IADAC;UAEA;YACA;cACApD;YACA;YACAmB;cACAY;cACAC;gBACA;gBACA;cACA;cACAC;cACAxC;cACAyC;gBACA;kBACAf;oBACAE;oBACAD;kBACA;kBACAE;oBACAH;sBACAY,qCACA,oCACA7B;oBACA;kBACA;gBACA;cACA;cACAoC;gBACAf;cACA;YACA;UACA;YACAJ;cACAE;cACAD;YACA;UACA;QACA;MACA;IACA;IACA;IACAiC;MAAA;MAEA;QACAlC;UAAAE;UAAAD;QAAA;QACA;MACA;MACA;QACAyB;QACAD;QACA/C;QACAC;MACA;MACAqB;QACAC;MACA;MACA;MACAkC;MACAA;MACAnC;QACAY;QACAC;UACA;UACA;QACA;QACAC;QACAxC;QACAyC;UAEA;YACA;cACAoB;cACAA;cACA;cACA;cACAnC;cACAA;gBACAC;cACA;cACAE;gBACAH;kBACAY,oDACA;gBACA;cACA;YACA;UACA;YACAZ;YACA;UACA;QACA;QACAmB;UAEAnB;YACAE;YACAD;UACA;UACAE;YACAH;UACA;QACA;MAEA;IAEA;IACA;IACAoC;MAAA;MACA;MACAhC;MACA;QACAJ;UAAAE;UAAAD;QAAA;QACA;MACA;;MAEA;MACA;QACApB;QACAH;QACAC;MACA;MACAqB;QACAC;MACA;MACA;MACAkC;MACAA;MACAnC;QACAY;QACAC;UACA;UACA;QACA;QACAC;QACAxC;QACAyC;UAEA;YACA;cACAoB;cACAA;cACA;cAEA;cACAnC;cACAA;gBACAC;cACA;cACAE;gBACAH;kBACAY;gBACA;cACA;YACA;UACA;YACAZ;YACA;UACA;QAEA;QACAmB;UACAnB;YACAE;YACAD;UACA;UACAE;YACAH;UACA;QACA;MACA;IACA;EACA;AACA,GACA;AAAA;AACA;EAAA;EACA;EACA;EACA;IACA;MACAqC;IACA;EACA;EACA;AACA;AAAA;AACA;EAAA;EACA;IACA;IACA;MACA;IACA;EACA;EACA;AACA,E;;;;;;;;;;;;;AC9dA;AAAA;AAAA;AAAA;AAAusC,CAAgB,kmCAAG,EAAC,C;;;;;;;;;;;ACA3tC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/service/add_photo.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/service/add_photo.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./add_photo.vue?vue&type=template&id=138e7bde&\"\nvar renderjs\nimport script from \"./add_photo.vue?vue&type=script&lang=js&\"\nexport * from \"./add_photo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./add_photo.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/service/add_photo.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add_photo.vue?vue&type=template&id=138e7bde&\"","var components\ntry {\n  components = {\n    clIcon: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-icon/cl-icon\" */ \"@/cl-uni/components/cl-icon/cl-icon.vue\"\n      )\n    },\n    clConfirm: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-confirm/cl-confirm\" */ \"@/cl-uni/components/cl-confirm/cl-confirm.vue\"\n      )\n    },\n    mUpload: function () {\n      return import(\n        /* webpackChunkName: \"components/m-upload/m-upload\" */ \"@/components/m-upload/m-upload.vue\"\n      )\n    },\n    ldSelect: function () {\n      return import(\n        /* webpackChunkName: \"components/ld-select/ld-select\" */ \"@/components/ld-select/ld-select.vue\"\n      )\n    },\n    clTextarea: function () {\n      return import(\n        /* webpackChunkName: \"cl-uni/components/cl-textarea/cl-textarea\" */ \"@/cl-uni/components/cl-textarea/cl-textarea.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add_photo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add_photo.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"content\">\n\t\t<view class=\"del\" @tap=\"del()\" v-if=\"id>0\">\n\t\t\t<cl-icon name=\"cl-icon-minus-border\" color=\"#007AFF\" :size=\"80\"></cl-icon>\n\t\t</view>\n\t\t<cl-confirm ref=\"del_confirm\"></cl-confirm>\n\t\t<view class=\"service\">\n\t\t\t<view class=\"service_title\">现场照片<span class=\"jh\">*</span><span class=\"dcts\">(最多4张)</span></view>\n\t\t\t<view class=\"service_content\">\n\t\t\t\t<view label=\"限制上传图片格式/大小\">\n\t\t\t\t\t<m-upload :url=\"upPicUrl\" :header=\"headerUpload\" :fileName=\"file\" ref=\"upload3\" title=\"添加工作照片\"\n\t\t\t\t\t\t@upload=\"handleLoaded3\" @change=\"handleChange3\" :number=\"4\"  :formData=\"formData\">\n\t\t\t\t\t\t<template v-slot:icon>\n\t\t\t\t\t\t\t<text class=\"s-add-list-btn-icon\">+</text>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</m-upload>\n\t\t\t\t</view>\n\t\t\t\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"service\">\n\t\t\t<view class=\"service_title\">备注说明</view>\n\t\t\t<view class=\"lz\">\n\t\t\t\t<ld-select :multiple=\"true\" :list=\"shortcuts\" @inputFun=\"inputFun\" label-key=\"label\" value-key=\"value\"\n\t\t\t\t\tplaceholder=\"示例\" clearable v-model=\"remarks\" @change=\"selectChange\"></ld-select>\n\t\t\t</view>\n\t\t\t<cl-textarea rows=\"13\" cols=\"40\" placeholder=\"请输入\" v-model=\"remarks\" count></cl-textarea>\n\t\t</view>\n\t\t<button v-if=\"id>0\" class=\"bu\" @tap=\"$noMultipleClicks(save)\">\n\t\t\t保存\n\t\t</button>\n\t\t<button v-else class=\"bu\" @tap=\"$noMultipleClicks(add)\">\n\t\t\t保存\n\t\t</button>\n\t</view>\n</template>\n\n<script>\n\timport ldSelect from '@/components/ld-select/ld-select.vue';\n\timport newUpload from '@/components/new-upload/new-upload.vue';\n\n\texport default {\n\t\tcomponents: {\n\t\t\tldSelect,\n\t\t\tnewUpload,\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tname: '新增工作照',\n\t\t\t\tnoClick: true,\n\t\t\t\tupload_site_photos: [],\n\t\t\t\tsite_photos: '',\n\t\t\t\tremarks: [],\n\t\t\t\ttablename: \"photos\",\n\t\t\t\tid: '',\n\t\t\t\tjobid: '',\n\t\t\t\tjobtype: '',\n\t\t\t\tshortcut_type: '',\n\t\t\t\tservice_type: '',\n\t\t\t\tshortcuts: [],\n\t\t\t\tshortcutsOld: [],\n\t\t\t\tcustInfo: {},\n\t\t\t\tsearch_key: '',\n\t\t\t\ttimer: null,\n\t\t\t\tlen: false,\n\t\t\t\tpercent: 0,\n\t\t\t\t// showProgress:false,\n\t\t\t\timageNum: -1,\n\t\t\t\tupPicUrl: `${this.$baseUrl}/Upload.Upload/image`,\n\t\t\t\tinit_photos: [],\n\t\t\t\theaderUpload: {\n\t\t\t\t\t'token': uni.getStorageSync('token')\n\t\t\t\t},\n\t\t\t\ttype:0,\n\t\t\t\tformData: {\n\t\t\t\t\ttype:0\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tonLoad(index) {\n\t\t\tvar loginRes = this.checkLogin();\n\t\t\tif (!loginRes) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请先登录\",\n\t\t\t\t\ticon: 'none',\n\t\t\t\t});\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\treturn false\n\t\t\t\t}, 2000);\n\t\t\t}\n\n\t\t\tthis.id = index.id\n\t\t\tthis.jobid = index.jobid\n\t\t\tthis.jobtype = index.jobtype\n\t\t\tthis.shortcut_type = index.shortcut_type\n\t\t\tthis.service_type = index.service_type\n\n\t\t\tif (this.id > 0) {\n\t\t\t\tthis.getItem()\n\t\t\t}\n\t\t\t// 设置预览图片\n\t\t\t// this.$nextTick(() => {\n\t\t\t// \tthis.$refs.upload3.setItems(this.init_photos);\n\t\t\t// })\n\n\t\t\t// 获取快捷语\n\t\t\tthis.getshortcuts()\n\t\t\t\n\t\t\tconsole.log(`${this.$baseUrl}`)\n\t\t},\n\t\tmethods: {\n\t\t\t\n\t\t\t/**\n\t\t\t *搜索开始\n\t\t\t * *\n\t\t\t */\n\t\t\tinputFun(data) {\n\n\t\t\t\tthis.search_key = data.value;\n\t\t\t\tthis.clearTimer()\n\t\t\t\tif (this.search_key && this.search_key.length > 0) {\n\n\t\t\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\t\t\tlet result = fuzzyQuery(this.shortcuts, this.search_key, 'value') // 数组、搜索值、字段\n\t\t\t\t\t\tthis.shortcuts = result\n\t\t\t\t\t}, 500)\n\n\t\t\t\t} else {\n\t\t\t\t\t// 恢复原来值\n\t\t\t\t\tthis.shortcuts = this.shortcutsOld\n\t\t\t\t}\n\t\t\t},\n\t\t\tclearTimer() {\n\t\t\t\tif (this.timer) {\n\t\t\t\t\tclearTimeout(this.timer)\n\t\t\t\t}\n\t\t\t},\n\t\t\t/**\n\t\t\t *搜索结束\n\t\t\t * *\n\t\t\t */\n\t\t\tgetCache(name) { //获取缓存数据\n\t\t\t\tvar data = uni.getStorageSync(name);\n\t\t\t\tif (data) {\n\t\t\t\t\tif (isJsonString(data)) { //json字符串转对象\n\t\t\t\t\t\treturn JSON.parse(data);\n\t\t\t\t\t}\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tselectChange(val) {\n\t\t\t\tthis.remarks = val\n\t\t\t},\n\t\t\t// 详情\n\t\t\tgetItem() {\n\t\t\t\tlet that = this\n\t\t\t\tlet param = {\n\t\t\t\t\tid: this.id,\n\t\t\t\t}\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `${this.$baseUrl}/SiteWorkPhotos.SiteWorkPhotos/getSiteWorkPhotosInfo`,\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t\t'token': uni.getStorageSync('token')\n\t\t\t\t\t},\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: param,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.data.code == 200) {\n\t\t\t\t\t\t\tif (res.data.data) {\n\t\t\t\t\t\t\t\t// console.log(res.data.data)\n\t\n\t\t\t\t\t\t\t\tvar strArr = res.data.data.site_photos ?? [];\t\n\t\t\t\t\t\t\t\tif (strArr.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tstrArr.forEach((item,i)=>{\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tlet imgurl = '/' + item\n\t\t\t\t\t\t\t\t\t\timgurl.replace(/\\\"/g, \"\").replace(/[\\\\]/g, '')\n\t\t\t\t\t\t\t\t\t\tthis.init_photos[i] = imgurl\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tthis.$refs.upload3.setItems(this.init_photos);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tthat.remarks = res.data.data.remarks\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(res.data.code == 400)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tuni.$utils.toast(res.data.msg)\n\t\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tonBeforeUpload(file, index) {\n\t\t\t\t// 受支持的图片格式\n\t\t\t\t// const fileType = ['image/png', 'image/jpeg'];\n\t\t\t\t// 受支持的图片大小\n\t\t\t\t// if (file.size / 1000 > 51.2) {\n\t\t\t\t//     uni.showToast({icon:'none',title:`图片大小不能大于50K`});\n\t\t\t\t//     return false;\n\t\t\t\t// }\n\t\t\t\t// if (fileType.indexOf(fileType) === -1) {\n\t\t\t\t//     uni.showToast({icon:'none',title:`仅支持${fileType.join('、').replace(/image\\//g, '')}图片格式`});\n\t\t\t\t//     return false;\n\t\t\t\t// }\n\t\t\t},\n\n\t\t\thandleChange3() {\n\t\t\t\tthis.$refs.upload3.upload();\n\t\t\t},\n\n\t\t\t// 获取上传或者预览后的图片\n\t\t\thandleLoaded3(arr) {\n\t\t\t\tconsole.log(\"获取上传或者预览后的图片：\")\n\t\t\t\tconsole.log(arr)\n\t\t\t\tvar imageStr = \"\";\n\t\t\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\t\t\timageStr += arr[i].result + \",\";\n\t\t\t\t}\n\t\t\t\t//去掉最后一个逗号\n\t\t\t\tif (imageStr.length > 0) {\n\t\t\t\t\timageStr = imageStr.substr(0, imageStr.length - 1);\n\t\t\t\t}\n\t\t\t\t// console.log(imageStr);\n\t\t\t\tthis.upload_site_photos = imageStr\n\t\t\t},\n\t\t\t//查询快捷语\n\t\t\tgetshortcuts() {\n\n\t\t\t\tlet params = {\n\t\t\t\t\tjob_type: this.jobtype,\n\t\t\t\t\tjob_id: this.jobid\n\t\t\t\t}\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `${this.$baseUrl}/SiteWorkPhotos.SiteWorkPhotos/getShortcutContents`,\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t\t'token': uni.getStorageSync('token')\n\t\t\t\t\t},\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: params,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.data.code == 200) {\n\t\t\t\t\t\t\t// console.log(res.data.data)\n\n\t\t\t\t\t\t\tlet shortcuts = res.data.data\n\t\t\t\t\t\t\tlet shortcutsArr = []\n\t\t\t\t\t\t\tshortcuts.forEach((item, i) => {\n\t\t\t\t\t\t\t\tshortcutsArr.push({\n\t\t\t\t\t\t\t\t\tlabel: item.content,\n\t\t\t\t\t\t\t\t\tvalue: item.content\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t// console.log(shortcutsArr)\n\n\t\t\t\t\t\t\tthis.shortcuts = shortcutsArr\n\t\t\t\t\t\t\tthis.shortcutsOld = shortcutsArr\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: res.msg\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 删除\n\t\t\tdel() {\n\n\t\t\t\tthis.$refs[\"del_confirm\"].open({\n\t\t\t\t\ttitle: \"提示\",\n\t\t\t\t\tmessage: \"确认删除？\",\n\t\t\t\t\tcallback: ({\n\t\t\t\t\t\taction\n\t\t\t\t\t}) => {\n\t\t\t\t\t\tif (action == 'confirm') {\n\t\t\t\t\t\t\tlet param = {\n\t\t\t\t\t\t\t\tid: this.id\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\turl: `${this.$baseUrl}/SiteWorkPhotos.SiteWorkPhotos/delSiteWorkPhotos`,\n\t\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t\t\t\t\t'token': uni.getStorageSync('token')\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tmethod: 'DELETE',\n\t\t\t\t\t\t\t\tdata: param,\n\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\tif (res.data.code == 200) {\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\t\t\ttitle: '删除成功'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\t\t\turl: \"/pages/service/photo?jobid=\" +\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.jobid + '&jobtype=' + this\n\t\t\t\t\t\t\t\t\t\t\t\t\t.jobtype\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\ttitle: '取消成功'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 添加\n\t\t\tadd() {\n\t\t\t\t\n\t\t\t\tif (this.upload_site_photos == '' || this.upload_site_photos == undefined || this.upload_site_photos.length == 0) {\n\t\t\t\t\tuni.showToast({icon: 'none', title: `没选择工作照(⊙_⊙)?`});\n\t\t\t\t    return false;\n\t\t\t\t}\n\t\t\t\tlet param = {\n\t\t\t\t\tjob_id: this.jobid,\n\t\t\t\t\tjob_type: this.jobtype,\n\t\t\t\t\tsite_photos: this.upload_site_photos,\n\t\t\t\t\tremarks: this.remarks,\n\t\t\t\t}\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '正在保存'\n\t\t\t\t});\n\t\t\t\tvar log = require('log.js')\n\t\t\t\tlog.info('点击了保存现场工作照。。。')\n\t\t\t\tlog.info('param', param)\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `${this.$baseUrl}/SiteWorkPhotos.SiteWorkPhotos/addSiteWorkPhotos`,\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t\t'token': uni.getStorageSync('token')\n\t\t\t\t\t},\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: param,\n\t\t\t\t\tsuccess: (res) => {\n\n\t\t\t\t\t\tif (res.data.code == 200) {\n\t\t\t\t\t\t\tif (res.data.data) {\n\t\t\t\t\t\t\t\tlog.info('保存现场工作照-成功')\n\t\t\t\t\t\t\t\tlog.info('param', param)\n\t\t\t\t\t\t\t\tthis.id = res.data.data\n\t\t\t\t\t\t\t\tthis.del_index = []\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '保存成功',\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\turl: \"/pages/service/photo?jobid=\" + this.jobid +\n\t\t\t\t\t\t\t\t\t\t\t'&jobtype=' + this.jobtype\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}, 100)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tuni.$utils.toast(res.data.msg)\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ticon: 'error',\n\t\t\t\t\t\t\ttitle: err.errMsg\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t},\n\n\t\t\t\t})\n\n\t\t\t},\n\t\t\t// 保存\n\t\t\tsave() {\n\t\t\t\t//保存信息\n\t\t\t\tconsole.log(\"保存图片信息：\")\n\t\t\t\tif (this.upload_site_photos == '' || this.upload_site_photos == undefined || this.upload_site_photos.length == 0) {\n\t\t\t\t\tuni.showToast({icon: 'none', title: `没选择工作照(⊙_⊙)?`});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// this.upload_site_photos = this.upload_site_photos.split(',').filter(item => item !== 'undefined').join(',');\n\t\t\t\tlet param = {\n\t\t\t\t\tid: this.id,\n\t\t\t\t\tsite_photos:this.upload_site_photos,\n\t\t\t\t\tremarks: this.remarks,\n\t\t\t\t}\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '正在保存'\n\t\t\t\t});\n\t\t\t\tvar log = require('log.js')\n\t\t\t\tlog.info('点击了保存现场工作照。。。')\n\t\t\t\tlog.info('param', param)\n\t\t\t\tuni.request({\n\t\t\t\t\turl: `${this.$baseUrl}/SiteWorkPhotos.SiteWorkPhotos/editSiteWorkPhotos`,\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t\t'token': uni.getStorageSync('token')\n\t\t\t\t\t},\n\t\t\t\t\tmethod: 'PUT',\n\t\t\t\t\tdata: param,\n\t\t\t\t\tsuccess: (res) => {\n\n\t\t\t\t\t\tif (res.data.code == 200) {\n\t\t\t\t\t\t\tif (res.data.data) {\n\t\t\t\t\t\t\t\tlog.info('保存现场工作照-成功')\n\t\t\t\t\t\t\t\tlog.info('param', param)\n\t\t\t\t\t\t\t\tthis.id = res.data.data\n\n\t\t\t\t\t\t\t\tthis.del_index = []\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '保存成功',\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\turl: \"/pages/service/photo?jobid=\" + this.jobid +'&jobtype=' + this.jobtype\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tuni.$utils.toast(res.data.msg)\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t}\n\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ticon: 'error',\n\t\t\t\t\t\t\ttitle: err.errMsg\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\t// 快捷语搜索\n\texport const fuzzyQuery = (list, keyWord, attribute = 'value') => {\n\t\tconst reg = new RegExp(keyWord)\n\t\tconst arr = []\n\t\tfor (let i = 0; i < list.length; i++) {\n\t\t\tif (reg.test(list[i][attribute])) {\n\t\t\t\tarr.push(list[i])\n\t\t\t}\n\t\t}\n\t\treturn arr\n\t}\n\tconst isJsonString = str => { // 判断字符串是否是json字符串\n\t\ttry {\n\t\t\tconst toObj = JSON.parse(str);\n\t\t\tif (toObj && typeof toObj === 'object') {\n\t\t\t\treturn true\n\t\t\t}\n\t\t} catch {}\n\t\treturn false\n\t}\n</script>\n\n<style lang=\"scss\">\n\t.content {\n\t\t/* padding: 0 21rpx; */\n\t\tmargin-top: 21 rpx;\n\t}\n\n\t.del {\n\t\tz-index: 9999;\n\t\tposition: fixed;\n\t\tbottom: 10%;\n\t\tright: 15px\n\t}\n\n\t.new_card {\n\t\tbackground-color: #FFFFFF;\n\t\tborder-radius: 10px;\n\t\tpadding-bottom: 1px;\n\t\tmargin: 10px 0px;\n\n\t}\n\n\t.new_card_title {\n\t\tborder-bottom: 1px solid #e0dcdc;\n\t\tfont-size: 19px;\n\t\tfont-weight: bold;\n\t\tpadding: 10px;\n\t\theight: 30px;\n\t}\n\n\t.xh {\n\t\tcolor: #007AFF;\n\t\tfont-weight: bold;\n\t\tfont-size: 21px;\n\t\tmargin-right: 5px;\n\t}\n\n\t.new_card_title_left {\n\t\tfloat: left;\n\t}\n\n\t.new_card_title_right {\n\t\tfont-size: 18px;\n\t\tfloat: right;\n\t\tposition: relative;\n\t\ttop: 1px;\n\t}\n\n\t.new_card_content {\n\t\tmargin: 10px;\n\t\tfont-size: 17px;\n\t\t/* color: #7b7070; */\n\t}\n\n\t.new_card_content1 view {\n\t\tmargin-bottom: 10px;\n\t}\n\n\n\t.bu {\n\t\tbackground-color: #007AFF;\n\t\tcolor: #FFFFFF;\n\t\theight: 50px;\n\t\ttext-align: center;\n\t\tborder-top: 1px solid #f5f2f2;\n\t\tfont-size: 19px;\n\t\tfont-weight: bold;\n\t\tposition: fixed;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0px;\n\t\tline-height: 50px;\n\t}\n\n\t.cl-textarea textarea {\n\t\tfont-size: 32 rpx;\n\t\twidth: 100%;\n\t\tbox-sizing: border-box;\n\t\tfont-size: 32 rpx;\n\t}\n\n\t.cl-select picker {\n\t\theight: 70 rpx;\n\t\tline-height: 70 rpx;\n\t\tfont-size: 17px;\n\t}\n\n\t.cl-textarea {\n\t\tborder: 1 rpx solid #dcdfe6;\n\t\tborder-radius: 8 rpx;\n\t\twidth: 100%;\n\t\tbox-sizing: border-box;\n\t\tbackground-color: #fff;\n\t\tposition: relative;\n\t\tpadding: 10 rpx 10 rpx 10 rpx 16 rpx;\n\t\tline-height: 36 rpx;\n\t\tmargin-top: 10px;\n\t}\n\n\t/* new */\n\t.content {\n\t\tpadding: 10px;\n\t}\n\n\t.service {\n\t\tpadding-bottom: 15px;\n\t}\n\n\t.jh {\n\t\tcolor: red;\n\t\tmargin-left: 5px;\n\t}\n\n\t.service_title {\n\t\t/* color: #03A9F4; */\n\t\tfont-size: 18px;\n\t\tfont-weight: bold;\n\t}\n\n\t.text-green.data-v-2ee6bce8 {\n\t\tcolor: #12900a;\n\t}\n\n\tpage {\n\t\tbackground-color: #FFFFFF;\n\t}\n\n\t.service_content {\n\t\tmargin: 8px 0px;\n\t}\n\n\t.service_content view {\n\t\tmargin: 3px 0px;\n\t}\n\n\t.lz {\n\t\tmargin: 10px 0px;\n\t}\n\t// 自定义上传样式\n\t.uni-file-picker__container {\n\t\tdisplay: flex;\n\t\tbox-sizing: border-box;\n\t\tflex-wrap: wrap;\n\t\tmargin: -5px;\n\n\t\t.file-picker__box {\n\t\t\tposition: relative;\n\t\t\twidth: 33.3%;\n\t\t\theight: 0;\n\t\t\tpadding-top: 33.33%;\n\t\t\tbox-sizing: border-box;\n\n\t\t\t.file-picker__box-content {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tright: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tmargin: 5px;\n\t\t\t\tborder: 1px #eee solid;\n\t\t\t\tborder-radius: 5px;\n\t\t\t\toverflow: hidden;\n\t\t\t}\n\n\t\t\t.file-picker__box-content {\n\t\t\t\tborder-width: 1px;\n\t\t\t\tborder-style: solid;\n\t\t\t\tborder-color: #eee;\n\t\t\t\tborder-radius: 3px;\n\t\t\t}\n\n\t\t\t.is-add {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\n\t\t\t\t.icon-add {\n\t\t\t\t\twidth: 50px;\n\t\t\t\t\theight: 5px;\n\t\t\t\t\tbackground-color: #f1f1f1;\n\t\t\t\t\tborder-radius: 2px;\n\t\t\t\t}\n\n\t\t\t\t.rotate {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\t-webkit-transform: rotate(90deg);\n\t\t\t\t\ttransform: rotate(90deg);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\t// 图片\n\t.file-image {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t// 删除图标\n\t.icon-del-box {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tposition: absolute;\n\t\ttop: 3px;\n\t\tright: 3px;\n\t\theight: 26px;\n\t\twidth: 26px;\n\t\tborder-radius: 50%;\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\tz-index: 2;\n\t\t-webkit-transform: rotate(-45deg);\n\t\ttransform: rotate(-45deg);\n\n\t\t.icon-del {\n\t\t\twidth: 15px;\n\t\t\theight: 2px;\n\t\t\tbackground-color: #fff;\n\t\t\tborder-radius: 2px;\n\t\t}\n\n\t\t.rotate {\n\t\t\tposition: absolute;\n\t\t\t-webkit-transform: rotate(90deg);\n\t\t\ttransform: rotate(90deg);\n\t\t}\n\t}\n\n\t.bg-white {\n\t\tbackground: #fff;\n\t}\n</style>","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add_photo.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add_photo.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1707450334858\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}